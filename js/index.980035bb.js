(function(){var e={249:function(e,t,i){"use strict";i.r(t);var n=i(9248),a=i.n(n),o=i(9089),s=i.n(o),r=s()(a());r.push([e.id,".operation[data-v-4c87c9c0]{background-color:rgba(0,0,0,.3)}.selector[data-v-4c87c9c0]{border-radius:10px;width:12px;height:12px;margin-left:-6px;margin-top:-6px;background-color:#32b5fe;border:1px solid #32b5fe}.delete[data-v-4c87c9c0]{border-radius:10px;width:18px;height:18px;margin-left:-9px;margin-top:-9px;background-color:#fff}",""]),t["default"]=r},340:function(e,t,i){"use strict";i.d(t,{Kd:function(){return s},Xb:function(){return l},_v:function(){return r},readAsArrayBuffer:function(){return o}});i(8259),i(5487),i(4322);var n=i(1100),a=i(8443);function o(e){return new Promise((t,i)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=i,n.readAsArrayBuffer(e)})}function s(e){return new Promise((t,i)=>{const n=new Image;if(n.onload=()=>t(n),n.onerror=i,e instanceof Blob){const t=window.URL.createObjectURL(e);n.src=t}else n.setAttribute("crossOrigin","anonymous"),n.src=e})}function r(e){return new Promise((t,i)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=i,n.readAsDataURL(e)})}async function l(e){return(0,n.YE)(e).promise}n.EA.workerSrc=a},477:function(){},1214:function(e,t,i){var n=i(3629);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(5312).A;a("40bde81e",n,!0,{sourceMap:!1,shadowMode:!1})},2508:function(e,t,i){"use strict";i.r(t);var n=i(9248),a=i.n(n),o=i(9089),s=i.n(o),r=s()(a());r.push([e.id,".shadowOutline[data-v-8048ab00]{box-shadow:0 0 0 3px rgba(66,153,225,.5)}.noTouchAction[data-v-8048ab00]{touch-action:none}h3[data-v-8048ab00]{margin:40px 0 0}ul[data-v-8048ab00]{list-style-type:none;padding:0}li[data-v-8048ab00]{display:inline-block;margin:0 10px}a[data-v-8048ab00]{color:#42b983}",""]),t["default"]=r},2536:function(e,t,i){var n=i(5945);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(5312).A;a("17555429",n,!0,{sourceMap:!1,shadowMode:!1})},3629:function(e,t,i){"use strict";i.r(t);var n=i(9248),a=i.n(n),o=i(9089),s=i.n(o),r=s()(a());r.push([e.id,".operation[data-v-80906ed2]{background-color:rgba(0,0,0,.1)}.selector[data-v-80906ed2]{border-radius:10px;width:12px;height:12px;margin-left:-6px;margin-top:-6px;background-color:#32b5fe;border:1px solid #32b5fe}.delete[data-v-80906ed2]{border-radius:10px;width:18px;height:18px;margin-left:-9px;margin-top:-9px;background-color:#fff}",""]),t["default"]=r},4075:function(e,t,i){"use strict";var n=i(410),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("VuePdfEditor",{ref:"vuePdfEditor",attrs:{width:"100%",height:"100%","show-choose-file-btn":!0,"show-customize-editor":!0,"show-customize-editor-add-text":!0,"show-customize-editor-add-img":!0,"show-customize-editor-add-draw":!0,"show-line-size-select":!0,"show-font-size-select":!0,"show-font-select":!0,"show-rename":!0,"show-save-btn":!0,"init-files":e.initFiles,"init-file-names":e.initFileNames,"init-text-fields":this.textFields,"init-image-urls":this.imageUrls,"init-image-scale":1,"save-to-upload":!1,"seal-image-show":!0,"seal-image-hidden-on-save":!1,"show-page-footer":!0,"page-count-format":"{currentPage} of {totalPages}"},on:{onSave2Upload:e.save2Upload}})],1)},o=[],s={name:"App",data(){return{initFileNames:["test.pdf"],initFiles:[],textFields:["initial text"],imageUrls:[]}},methods:{save2Upload(e){console.log("PDF saved:",e.fileName),console.log("PDF bytes:",e.pdfBytes),console.log("Seal info:",e.sealInfo)}}},r=s,l=(i(4808),i(1656)),d=(0,l.A)(r,a,o,!1,null,null,null),h=d.exports,c=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{margin:"0 auto",overflow:"hidden",position:"relative"},style:{width:e.width,height:e.height}},[t("div",{ref:"scrollBox",staticClass:"flex-col py-12 items-center bg-gray-100",staticStyle:{width:"100%",height:"100%",overflow:"auto"},on:{wheel:[function(t){return t.ctrlKey?e.wheelZoom.apply(null,arguments):null},function(t){return t.metaKey?e.wheelZoom.apply(null,arguments):null}]}},[e.showChooseFileBtn||e.showCustomizeEditor||e.showSaveBtn?t("div",{staticClass:"z-10 top-0 left-0 right-0 z-10 h-12 flex justify-center items-center bg-gray-200 border-b border-gray-300",staticStyle:{position:"absolute"}},[t("input",{staticClass:"hidden",attrs:{id:"pdf",type:"file",name:"pdf",multiple:""},on:{change:e.onUploadPDF}}),t("input",{staticClass:"hidden",attrs:{id:"image",type:"file",name:"image"},on:{change:e.onUploadImage}}),e.showChooseFileBtn?t("label",{staticClass:"whitespace-no-wrap bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 md:px-4 rounded mr-3 cursor-pointer md:mr-4",attrs:{for:"pdf"}},[e._v(" Select PDF ")]):e._e(),t("button",{directives:[{name:"show",rawName:"v-show",value:e.narrowEnlargeShow,expression:"narrowEnlargeShow"}],staticClass:"w-7 h-7 bg-blue-500 hover:bg-blue-700 text-white font-bold flex items-center justify-center mr-3 md:mr-4 rounded-full",on:{click:e.narrow}},[e._v(" - ")]),t("button",{directives:[{name:"show",rawName:"v-show",value:e.narrowEnlargeShow,expression:"narrowEnlargeShow"}],staticClass:"w-7 h-7 bg-blue-500 hover:bg-blue-700 text-white font-bold flex items-center justify-center mr-3 md:mr-4 rounded-full",on:{click:e.enlarge}},[e._v(" + ")]),e.showCustomizeEditor?t("div",{staticClass:"relative mr-3 flex h-8 bg-gray-400 rounded-sm overflow-hidden md:mr-4"},[e.showCustomizeEditorAddImg?t("label",{staticClass:"flex items-center justify-center h-full w-8 hover:bg-gray-500 cursor-pointer",class:[e.selectedPageIndex<0?"cursor-not-allowed bg-gray-500":""],attrs:{title:"add pictures",for:"image"}},[t("ImageIcon",{attrs:{size:20,title:"An icon for adding images"}})],1):e._e(),e.showCustomizeEditorAddText?t("label",{staticClass:"flex items-center justify-center h-full w-8 hover:bg-gray-500 cursor-pointer",class:[e.selectedPageIndex<0?"cursor-not-allowed bg-gray-500":""],attrs:{title:"Add text",for:"text"},on:{click:e.onAddTextField}},[t("TextIcon",{attrs:{size:20,title:"An icon for adding text"}})],1):e._e(),e.showCustomizeEditorAddDraw?t("label",{staticClass:"flex items-center justify-center h-full w-8 hover:bg-gray-500 cursor-pointer",class:[e.selectedPageIndex<0?"cursor-not-allowed bg-gray-500":""],attrs:{title:"Add a handwriting"},on:{click:e.onAddDrawing}},[t("GestureIcon",{attrs:{size:20,title:"An icon for adding drawing"}})],1):e._e()]):e._e(),e.showRename&&1===e.pdfDocuments.length?t("div",{staticClass:"justify-center mr-3 md:mr-4 w-full max-w-xs hidden md:flex"},[t("PencilIcon",{staticClass:"mr-2",attrs:{size:20,title:"a pen, edit pdf name"},on:{click:function(t){return e.renamePDF(e.$refs.renamePDFInputOne)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.pdfName,expression:"pdfName"}],ref:"renamePDFInputOne",staticClass:"flex-grow bg-transparent",attrs:{title:"Rename PDF here",placeholder:"Rename PDF here",type:"text"},domProps:{value:e.pdfName},on:{input:function(t){t.target.composing||(e.pdfName=t.target.value)}}})],1):e._e(),e.showSaveBtn?t("button",{staticClass:"w-20 bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 md:px-4 mr-3 md:mr-4 rounded",class:[0===e.pdfDocuments.length||e.saving?"cursor-not-allowed bg-blue-700":""],on:{click:e.savePDF}},[e._v(" "+e._s(e.saving?"saving":"keep")+" ")]):e._e()]):e._e(),e.addingDrawing?t("div",[t("div",{staticClass:"fixed z-10 top-0 left-0 right-0 border-b border-gray-300 bg-white shadow-lg",staticStyle:{height:"50%"}},[t("DrawingCanvas",{on:{onFinish:e.onFinishDrawingCanvas,onCancel:e.onCancelDrawingCanvas}})],1)]):e._e(),e.pdfDocuments.length?t("div",{ref:"pdfBody",staticClass:"w-full",attrs:{id:"pdfBody"}},[e.showRename&&1===e.pdfDocuments.length?t("div",{staticClass:"flex justify-center px-5 pt-5 w-full md:hidden"},[t("div",{staticClass:"flex items-center"},[t("PencilIcon",{staticClass:"mr-2",attrs:{size:20,title:"a pen, edit pdf name"},on:{click:function(t){return e.renamePDF(e.$refs.renamePDFInputTwo)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.pdfName,expression:"pdfName"}],ref:"renamePDFInputTwo",staticClass:"flex-grow bg-transparent justify-center",staticStyle:{"text-align":"center"},attrs:{title:"Rename PDF here",placeholder:"Rename PDF here",type:"text"},domProps:{value:e.pdfName},on:{input:function(t){t.target.composing||(e.pdfName=t.target.value)}}})],1)]):e._e(),t("div",{staticClass:"w-full",staticStyle:{"text-align":"center"}},e._l(e.pdfDocuments,function(i,n){return t("div",{key:n},e._l(i.pages,function(a,o){return t("div",{key:`${n}-${o}`,staticStyle:{display:"inline-block"}},[t("div",{class:["items-center",e.showPageFooter?(0===n&&0===o?"pt-5 px-5":"px-5")+(n===e.pdfDocuments.length-1&&o===i.pages.length-1?" pb-5":""):"p-5"],staticStyle:{"text-align":"center"},on:{mousedown:function(t){return e.selectPage(n,o)},touchstart:function(t){return e.selectPage(n,o)}}},[t("div",{staticStyle:{display:"inline-block"}},[t("div",{staticClass:"relative shadow-lg page",class:[n===e.selectedDocIndex&&o===e.selectedPageIndex?"shadowOutline":""]},[t("PDFPage",{ref:`page${n}-${o}`,refInFor:!0,attrs:{scale:e.scale,"data-key":`${n}-${o}`,page:a},on:{onMeasure:function(t){return e.onMeasure(t,n,o)}}}),t("div",{staticClass:"absolute top-0 left-0 transform origin-top-left noTouchAction",style:{transform:`scale(${i.pagesScale[o]})`}},e._l(i.allObjects[o],function(a,s){return t("div",{key:s},[t("div",["custom"===a.type?t("div",[e._t("custom",null,{object:a,pagesScale:i.pagesScale[o],onUpdate:t=>e.updateObject(n,a.id,t),onDelete:()=>e.deleteObject(n,a.id)})],2):"image"===a.type?t("div",[t("ImageItem",{attrs:{file:a.file,payload:a.payload,x:a.x,y:a.y,"fix-size":a.isSealImage,width:a.width,height:a.height,"origin-width":a.originWidth,"origin-height":a.originHeight,"page-scale":i.pagesScale[o]},on:{onUpdate:function(t){return e.updateObject(n,a.id,t)},onDelete:function(t){return e.deleteObject(n,a.id)}}})],1):"text"===a.type?t("div",[t("TextItem",{ref:"textItem",refInFor:!0,attrs:{text:a.text,x:a.x,y:a.y,width:a.width,height:a.height,"show-line-size-select":e.showLineSizeSelect,"show-font-size-select":e.showFontSizeSelect,"show-font-select":e.showFontSelect,size:a.size,"line-height":a.lineHeight,"font-family":a.fontFamily,"current-page":a.currentPage,"page-scale":i.pagesScale[o]},on:{onUpdate:function(t){return e.updateObject(n,a.id,t)},onDelete:function(t){return e.deleteObject(n,a.id)},onSelectFont:e.selectFontFamily}})],1):"drawing"===a.type?t("div",[t("Drawing",{attrs:{path:a.path,x:a.x,y:a.y,width:a.width,height:a.height,"origin-width":a.originWidth,"origin-height":a.originHeight,"page-scale":i.pagesScale[o]},on:{onUpdate:function(t){return e.updateObject(n,a.id,t)},onDelete:function(t){return e.deleteObject(n,a.id)}}})],1):e._e()])])}),0)],1)]),e.showPageFooter?t("div",{staticClass:"flex justify-between items-center pb-5 text-sm text-gray-600"},[t("span",[e._v(e._s(i.name))]),t("span",[e._v(e._s(e.formatPageCount(o+1,i.numPages)))])]):e._e()])])}),0)}),0)]):e._e()])])},u=[];i(6323),i(2306),i(7374),i(2439),i(2099),i(3640);const g={Courier:{correction(e,t){return(e*t-e)/2+e/6}},Helvetica:{correction(e,t){return(e*t-e)/2+e/10}},"Times-Roman":{correction(e,t){return(e*t-e)/2+e/7}}},p={...g};function f(e){if(g[e])return g[e];const t=p[e];if(!t)throw new Error(`Font '${e}' not exists.`);return g[e]=fetch(t.src).then(e=>e.arrayBuffer()).then(i=>{const n=new FontFace(e,i);return n.display="swap",n.load().then(()=>document.fonts.add(n)),{...t,buffer:i}}),g[e]}var m,w,y=function(){var e=this,t=e._self._c;return t("canvas",{ref:"canvas"})},x=[],v={name:"PDFPage",props:{page:{type:Promise},scale:{type:Number,default:1}},data(){return{dynamicScale:this.scale,clientWidth:null}},watch:{scale(e){this.dynamicScale=e,this.render()}},mounted(){this.render()},methods:{getCanvasMeasurement(){return{canvasWidth:this.$refs.canvas.width,canvasHeight:this.$refs.canvas.height}},measure(){this.$emit("onMeasure",{scale:this.dynamicScale})},async render(){const e=await this.page,t=this.$refs.canvas,i=t.getContext("2d"),n=e.getViewport({scale:this.dynamicScale});t.width=n.width,t.height=n.height,await e.render({canvasContext:i,viewport:n}).promise,this.measure(),window.addEventListener("resize",this.measure)}}},b=v,C=(0,l.A)(b,y,x,!1,null,"36693f52",null),P=C.exports,I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"absolute left-0 top-0 select-none",style:{width:`${e.width+e.dw}px`,height:`${Math.round((e.width+e.dw)/e.ratio)}px`,transform:e.translateCoordinates()}},[t("div",{staticClass:"absolute w-full h-full cursor-grab",class:["move"===e.operation?"cursor-grabbing":"",e.operation?"operation":""],on:{mousedown:e.handlePanStart,touchstart:e.handlePanStart}},[e.fixSize?e._e():t("div",{staticClass:"absolute cursor-nwse-resize transform selector",style:{top:"0%",left:"0%"},attrs:{"data-direction":"left-top"}}),e.fixSize?e._e():t("div",{staticClass:"absolute cursor-nesw-resize transform selector",style:{top:"0%",left:"100%"},attrs:{"data-direction":"right-top"}}),e.fixSize?e._e():t("div",{staticClass:"absolute cursor-nesw-resize transform selector",style:{top:"100%",left:"0%"},attrs:{"data-direction":"left-bottom"}}),e.fixSize?e._e():t("div",{staticClass:"absolute cursor-nwse-resize transform selector",style:{top:"100%",left:"100%"},attrs:{"data-direction":"right-bottom"}})]),t("div",{staticClass:"absolute cursor-pointer transform delete",style:{top:"0%",left:"50%"},on:{click:e.onDelete}},[t("CloseCircleIcon",{staticClass:"w-full h-full",attrs:{text:"Remove",fillColor:"red",size:25}})],1),t("canvas",{ref:"imgCanvas",staticClass:"w-full h-full border border-gray-400 border-dashed"})])},F=[],S={name:"PannableAreaMixin",data(){return{x_mixin:null,y_mixin:null,initialCanvasWidth:null,initialCanvasHeight:null}},created(){},methods:{getCurrentPageDimensions(){const e=this.$el?.closest(".page");if(!e)return{pageWidth:999999,pageHeight:999999};const t=e.querySelector("canvas");if(!t)return{pageWidth:999999,pageHeight:999999};if(!this.initialCanvasWidth){let e=this.$parent;while(e&&"VuePdfEditor"!==e.$options.name)e=e.$parent;const i=e?.scale||1;this.initialCanvasWidth=t.width/i,this.initialCanvasHeight=t.height/i}return{pageWidth:this.initialCanvasWidth,pageHeight:this.initialCanvasHeight}},handleMousedown(e){this.x_mixin=e.clientX,this.y_mixin=e.clientY;const t=e.target;return window.addEventListener("mousemove",this.handlePanMove),window.addEventListener("mouseup",this.handlePanEnd),{detail:{x:this.x_mixin,y:this.y_mixin,target:t}}},handleMousemove(e){const t=e.clientX-this.x_mixin,i=e.clientY-this.y_mixin;return this.x_mixin=e.clientX,this.y_mixin=e.clientY,{detail:{x:this.x_mixin,y:this.y_mixin,dx:t,dy:i}}},handleMouseup(e){this.x_mixin=e.clientX,this.y_mixin=e.clientY,window.removeEventListener("mousemove",this.handlePanMove),window.removeEventListener("mouseup",this.handlePanEnd);const{pageWidth:t,pageHeight:i}=this.getCurrentPageDimensions(),n=Math.max(0,Math.min(this.x+this.dx,t-this.width)),a=Math.max(0,Math.min(this.y+this.dy,i-this.height));return{detail:{x:n,y:a}}},handleTouchStart(e){if(e.touches.length>1)return;const t=e.touches[0];this.x_mixin=t.clientX,this.y_mixin=t.clientY;const i=t.target;return window.addEventListener("touchmove",this.handlePanMove,{passive:!1}),window.addEventListener("touchend",this.handlePanEnd),{detail:{x:this.x_mixin,y:this.y_mixin,target:i}}},handleTouchmove(e){if(e.touches.length>1)return;const t=e.touches[0],i=t.clientX-this.x_mixin,n=t.clientY-this.y_mixin;return this.x_mixin=t.clientX,this.y_mixin=t.clientY,{detail:{x:this.x_mixin,y:this.y_mixin,dx:i,dy:n}}},handleTouchend(e){const t=e.changedTouches[0];this.x_mixin=t.clientX,this.y_mixin=t.clientY,window.removeEventListener("touchmove",this.handlePanMove),window.removeEventListener("touchend",this.handlePanEnd);const{pageWidth:i,pageHeight:n}=this.getCurrentPageDimensions(),a=Math.max(0,Math.min(this.x+this.dx,i-this.width)),o=Math.max(0,Math.min(this.y+this.dy,n-this.height));return{detail:{x:a,y:o}}},translateCoordinates(){const{pageWidth:e,pageHeight:t}=this.getCurrentPageDimensions(),i=Math.max(0,Math.min(this.x+this.dx,e-this.width)),n=Math.max(0,Math.min(this.y+this.dy,t-this.height));return"translate("+i+"px, "+n+"px)"}}},D=S,_=(0,l.A)(D,m,w,!1,null,null,null),k=_.exports,z=i(9431),M={name:"ImageComponent",components:{CloseCircleIcon:z.A},mixins:[k],props:["payload","file","width","height","originWidth","originHeight","x","y","pageScale","fixSize"],data(){return{startX:null,startY:null,canvas:null,operation:"",directions:[],dx:0,dy:0,dw:0,dh:0}},computed:{ratio(){return this.originWidth/this.originHeight}},watch:{async file(e){e&&await this.render()}},async mounted(){await this.render()},methods:{async render(){const e=this.$refs.imgCanvas;e.width=this.originWidth,e.height=this.originHeight,e.getContext("2d").drawImage(this.payload,0,0);let t=1;const i=500;this.width>i&&(t=i/this.width),this.height>i&&(t=Math.min(t,i/this.height)),this.$emit("onUpdate",{width:this.width*t,height:this.height*t}),["image/jpeg","image/png","image/webp"].includes(this.file.type)||e.toBlob(e=>{this.$emit("onUpdate",{file:e})})},handlePanMove(e){let t;if("mousemove"===e.type&&(t=this.handleMousemove(e)),"touchmove"===e.type&&(t=this.handleTouchmove(e)),!t)return console.log("ERROR");const i=(t.detail.x-this.startX)/this.pageScale,n=(t.detail.y-this.startY)/this.pageScale;"move"===this.operation?(this.dx=i,this.dy=n):"scale"===this.operation&&(this.directions.includes("left")&&(this.dx=i,this.dw=-i),this.directions.includes("top")&&(this.dy=n,this.dh=-n),this.directions.includes("right")&&(this.dw=i),this.directions.includes("bottom")&&(this.dh=n))},handlePanEnd(e){let t;if("mouseup"===e.type&&(t=this.handleMouseup(e)),"touchend"===e.type&&(t=this.handleTouchend(e)),!t)return console.log("ERROR");"move"===this.operation?(this.$emit("onUpdate",{x:t.detail.x,y:t.detail.y}),this.dx=0,this.dy=0):"scale"===this.operation&&(this.$emit("onUpdate",{x:t.detail.x,y:t.detail.y,width:this.width+this.dw,height:Math.round((this.width+this.dw)/this.ratio)}),this.dx=0,this.dy=0,this.dw=0,this.dh=0,this.directions=[]),this.operation=""},handlePanStart(e){let t;return"mousedown"===e.type&&(t=this.handleMousedown(e)),"touchstart"===e.type&&(t=this.handleTouchStart(e)),t?(this.startX=t.detail.x,this.startY=t.detail.y,t.detail.target===e.currentTarget?this.operation="move":(this.operation="scale",void(this.directions=t.detail.target.dataset.direction.split("-")))):console.log("ERROR")},onDelete(){this.$emit("onDelete")}}},$=M,E=(i(6586),(0,l.A)($,I,F,!1,null,"4c87c9c0",null)),T=E.exports,j=function(){var e=this,t=e._self._c;return t("div",[t("TapoutComponent",{staticClass:"absolute left-0 top-0 select-none",style:{transform:e.translateCoordinates()},on:{tapout:e.onBlur}},["edit"===e.operation||"tool"===e.operation?t("TapoutComponent",{ref:"toolBox",staticClass:"h-full flex justify-center items-center bg-gray-300 border-b border-gray-400",staticStyle:{width:"400px",height:"40px"},on:{onfocus:e.onFocusTool,tapout:e.onBlurTool}},[e.showLineSizeSelect?t("div",{staticClass:"mr-2 flex items-center"},[t("FormatLineSpacingIcon",{staticClass:"w-6 mr-2",attrs:{title:"Line height"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.lineHeight_,expression:"lineHeight_"}],staticClass:"h-6 w-12 text-center flex-shrink-0 rounded-sm",attrs:{type:"number",min:"1",max:"10",step:"0.1"},domProps:{value:e.lineHeight_},on:{input:function(t){t.target.composing||(e.lineHeight_=t.target.value)}}})],1):e._e(),e.showFontSizeSelect?t("div",{staticClass:"mr-2 flex items-center"},[t("FormatSizeIcon",{staticClass:"w-6 mr-2",attrs:{title:"Font size"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.size_,expression:"size_"}],staticClass:"h-6 w-12 text-center flex-shrink-0 rounded-sm",attrs:{type:"number",min:"12",max:"120",step:"1"},domProps:{value:e.size_},on:{input:function(t){t.target.composing||(e.size_=t.target.value)}}})],1):e._e(),e.showFontSelect?t("div",{staticClass:"mr-2 flex items-center"},[t("FormatFontIcon",{staticClass:"w-4 mr-2",attrs:{title:"Font family"}}),t("div",{staticClass:"relative w-32 md:w-40"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.fontFamily_,expression:"fontFamily_"}],staticClass:"block appearance-none h-6 w-full bg-white pl-2 pr-8 rounded-sm leading-tight",on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.fontFamily_=t.target.multiple?i:i[0]},e.onChangeFont]}},e._l(e.Families,function(i,n){return t("option",{key:n,domProps:{value:i}},[e._v(" "+e._s(i)+" ")])}),0),t("div",{staticClass:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[t("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757\n                    6.586 4.343 8z"}})])])])],1):e._e(),t("div",{staticClass:"w-5 h-5 rounded-full bg-white cursor-pointer",on:{click:e.onDelete}},[t("CloseCircleIcon",{staticClass:"w-full h-full",attrs:{text:"Remove",fillColor:"red"}})],1)]):e._e(),t("div",{staticClass:"absolute w-full h-full cursor-grab border border-dotted border-gray-500",class:[e.operation?"":"cursor-grab","move"===e.operation?"cursor-grabbing":"",["edit","tool"].includes(e.operation)?"pointer-events-none border-gray-800 border-dashed":""],on:{mousedown:e.handlePanStart,touchstart:e.handlePanStart}}),t("div",{ref:"editable",staticClass:"outline-none whitespace-no-wrap",style:{fontSize:`${e.size_}px`,fontFamily:`${e.fontFamily_}, serif`,lineHeight:`${e.lineHeight_}`},attrs:{contenteditable:"true",spellcheck:"false"},on:{focus:e.onFocus,keydown:e.onKeydown,paste:function(t){return t.preventDefault(),e.onPaste.apply(null,arguments)}}})],1)],1)},O=[],A=function(){var e=this,t=e._self._c;return t("div",[e._t("default")],2)},R=[],B=(i(356),{name:"TapoutComponent",mounted(){window.addEventListener("touchstart",this.handleTapoutTouch),window.addEventListener("mousedown",this.handleTapoutMouse),this.$el.addEventListener("mousedown",this.handleFocus),this.$el.addEventListener("touchstart",this.handleFocus)},beforeUnmount(){window.removeEventListener("touchstart",this.handleTapoutTouch),window.removeEventListener("mousedown",this.handleTapoutMouse),this.$el.removeEventListener("mousedown",this.handleFocus),this.$el.removeEventListener("touchstart",this.handleFocus)},methods:{handleTapoutMouse(e){this.$el.contains(e.target)||this.$emit("tapout")},handleTapoutTouch(e){Array.from(e.touches).some(e=>this.$el.contains(e.target))||this.$emit("tapout")},handleFocus(){this.$emit("onfocus")}}}),H=B,U=(0,l.A)(H,A,R,!1,null,"6fa69517",null),L=U.exports;function N(e){return new Promise(t=>setTimeout(t,e))}const X=()=>{};var Y=i(1478),W=i(3196),V=i(7476),Z={name:"TextComponent",components:{TapoutComponent:L,FormatLineSpacingIcon:Y.A,FormatSizeIcon:W.A,FormatFontIcon:V.A,CloseCircleIcon:z.A},mixins:[k],props:["size","text","lineHeight","x","y","fontFamily","pageScale","currentPage","showLineSizeSelect","showFontSelect","showFontSizeSelect"],data(){return{Families:Object.keys(p),startX:null,startY:null,dx:0,dy:0,width:0,height:0,operation:"",size_:this.size,lineHeight_:this.lineHeight,fontFamily_:this.fontFamily}},computed:{},watch:{},mounted(){this.render()},created(){},methods:{handlePanMove(e){let t;if("mousemove"===e.type&&(t=this.handleMousemove(e)),"touchmove"===e.type&&(t=this.handleTouchmove(e)),!t)return console.log("ERROR");this.dx=(t.detail.x-this.startX)/this.pageScale,this.dy=(t.detail.y-this.startY)/this.pageScale},handlePanEnd(e){let t;return"mouseup"===e.type&&(t=this.handleMouseup(e)),"touchend"===e.type&&(t=this.handleTouchend(e)),t?0===this.dx&&0===this.dy?this.$refs.editable.focus():(this.$emit("onUpdate",{x:t.detail.x,y:t.detail.y}),this.dx=0,this.dy=0,void(this.operation="")):console.log("ERROR")},handlePanStart(e){let t;if(this.width=this.$refs.editable.offsetWidth,this.height=this.$refs.editable.offsetHeight,"mousedown"===e.type&&(t=this.handleMousedown(e)),"touchstart"===e.type&&(t=this.handleTouchStart(e)),!t)return console.log("ERROR");this.startX=t.detail.x,this.startY=t.detail.y,this.operation="move"},onFocus(){this.operation="edit"},async onBlur(){"edit"===this.operation&&"tool"!==this.operation&&(this.$refs.editable.blur(),this.sanitize(),this.$emit("onUpdate",{currentPage:this.currentPage,lines:this.extractLines(),width:this.$refs.editable.clientWidth}),this.operation="")},async onPaste(e){const t=e.clipboardData.getData("text");document.execCommand("insertHTML",!1,t),await N(),this.sanitize()},onKeydown(e){const t=Array.from(this.$refs.editable.childNodes);if(13===e.keyCode){e.preventDefault();const i=window.getSelection(),n=i.focusNode,a=i.focusOffset;if(n===this.$refs.editable)this.$refs.editable.insertBefore(document.createElement("br"),t[a]);else if(n instanceof HTMLBRElement)this.$refs.editable.insertBefore(document.createElement("br"),n);else if(n.textContent.length!==a)document.execCommand("insertHTML",!1,"<br>");else{let e=n.nextSibling;e?this.$refs.editable.insertBefore(document.createElement("br"),e):(e=this.$refs.editable.appendChild(document.createElement("br")),e=this.$refs.editable.appendChild(document.createElement("br"))),i.collapse(e,0)}}},onFocusTool(){this.operation="tool"},async onBlurTool(){"tool"===this.operation&&"edit"!==this.operation&&(this.$emit("onUpdate",{currentPage:this.currentPage,lines:this.extractLines(),lineHeight:this.lineHeight_,size:this.size_,fontFamily:this.fontFamily_}),this.operation="")},sanitize(){let e;while(e=Array.from(this.$refs.editable.childNodes).find(e=>!["#text","BR"].includes(e.nodeName)))this.$refs.editable.removeChild(e)},onChangeFont(){this.$emit("onSelectFont",{name:this.fontFamily_})},render(){this.$refs.editable.innerText=this.text,this.$refs.editable.focus()},render4Init(){this.$refs.editable.innerText=this.text,this.$refs.editable.focus(),document.getElementById("pdfBody").dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window}))},extractLines(){const e=this.$refs.editable.childNodes,t=[];let i="";for(let n=0;n<e.length;n++){const a=e[n];"BR"===a.nodeName?(t.push(i),i=""):i+=a.textContent}return t.push(i),t},onDelete(){this.operation="",setTimeout(()=>{this.$emit("onDelete")},100)}}},K=Z,G=(i(2536),(0,l.A)(K,j,O,!1,null,"19e49efc",null)),J=G.exports,q=function(){var e=this,t=e._self._c;return t("div",{staticClass:"absolute left-0 top-0 select-none",style:{width:`${e.width+e.dw}px`,height:(e.width+e.dw)/e.ratio+"px",transform:e.translateCoordinates()}},[t("div",{staticClass:"absolute w-full h-full cursor-grab border border-gray-400 border-dashed",class:["move"===e.operation?"cursor-grabbing":"",e.operation?"operation":""],on:{mousedown:e.handlePanStart,touchstart:e.handlePanStart}},[t("div",{staticClass:"absolute cursor-nwse-resize transform selector",style:{top:"0%",left:"0%"},attrs:{"data-direction":"left-top"}}),t("div",{staticClass:"absolute cursor-nwse-resize transform selector",style:{top:"100%",left:"100%"},attrs:{"data-direction":"right-bottom"}})]),t("div",{staticClass:"absolute cursor-pointer transform delete",style:{top:"0%",left:"50%"},on:{click:e.onDelete}},[t("CloseCircleIcon",{staticClass:"w-full h-full",attrs:{text:"Remove",fillColor:"red"}})],1),t("svg",{ref:"svg",attrs:{width:"100%",height:"100%"}},[t("path",{attrs:{"stroke-width":"5","stroke-linejoin":"round","stroke-linecap":"round",stroke:"black",fill:"none",d:e.path}})])])},Q=[],ee={name:"DrawingComponent",components:{CloseCircleIcon:z.A},mixins:[k],props:["originWidth","originHeight","width","height","x","y","pageScale","path"],data(){return{startX:null,startY:null,operation:"",dx:0,dy:0,dw:0,dh:0,direction:""}},computed:{ratio(){return this.originWidth/this.originHeight}},watch:{},mounted(){this.render()},created(){},methods:{async render(){this.$refs.svg.setAttribute("viewBox",`0 0 ${this.originWidth} ${this.originHeight}`)},handlePanMove(e){let t;if("mousemove"===e.type&&(t=this.handleMousemove(e)),"touchmove"===e.type&&(t=this.handleTouchmove(e)),!t)return console.log("ERROR");const i=(t.detail.x-this.startX)/this.pageScale,n=(t.detail.y-this.startY)/this.pageScale;if("move"===this.operation)this.dx=i,this.dy=n;else if("scale"===this.operation){if("left-top"===this.direction){let e=1/0;e=Math.min(i,n*this.ratio),this.dx=e,this.dw=-e,this.dy=e/this.ratio}if("right-bottom"===this.direction){let e=-1/0;e=Math.max(i,n*this.ratio),this.dw=e,this.dh=e/this.ratio}}},handlePanEnd(e){let t;if("mouseup"===e.type&&(t=this.handleMouseup(e)),"touchend"===e.type&&(t=this.handleTouchend(e)),!t)return console.log("ERROR");"move"===this.operation?(this.$emit("onUpdate",{x:t.detail.x,y:t.detail.y}),this.dx=0,this.dy=0):"scale"===this.operation&&(this.$emit("onUpdate",{x:t.detail.x,y:t.detail.y,width:this.width+this.dw,height:this.height+this.dh,scale:(this.width+this.dw)/this.originWidth}),this.dx=0,this.dy=0,this.dw=0,this.dh=0,this.direction=""),this.operation=""},handlePanStart(e){let t;return"mousedown"===e.type&&(t=this.handleMousedown(e)),"touchstart"===e.type&&(t=this.handleTouchStart(e)),t?(this.startX=t.detail.x,this.startY=t.detail.y,t.detail.target===e.currentTarget?this.operation="move":(this.operation="scale",void(this.direction=t.detail.target.dataset.direction))):console.log("ERROR")},onDelete(){this.$emit("onDelete")}}},te=ee,ie=(i(1214),(0,l.A)(te,q,Q,!1,null,"80906ed2",null)),ne=ie.exports,ae=function(){var e=this,t=e._self._c;return t("div",{staticClass:"relative w-full h-full"},[t("div",{staticClass:"relative w-full h-full select-none",attrs:{id:"canvas-container"},on:{mousedown:e.handlePanStart,touchstart:e.handlePanStart}},[t("svg",{staticClass:"relative w-full h-full pointer-events-none"},[t("path",{attrs:{"stroke-width":"5","stroke-linejoin":"round","stroke-linecap":"round",d:e.path,stroke:"black",fill:"none"}})])]),t("div",{staticClass:"absolute right-0 bottom-0 mr-4 mb-4 flex"},[t("button",{staticClass:"w-24 bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-4 rounded mr-4",on:{click:e.onClose}},[e._v(" Cancel ")]),t("button",{staticClass:"w-24 bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-4 rounded",on:{click:e.onFinish}},[e._v(" Finish ")])])])},oe=[],se=(i(966),{name:"DrawingCanvasComponent",mixins:[k],props:[],data(){return{x:0,y:0,path:"",minX:1/0,maxX:0,minY:1/0,maxY:0,paths:[],drawing:!1}},mounted(){},created(){},methods:{handlePanStart(e){let t;if("mousedown"===e.type&&(t=this.handleMousedown(e)),"touchstart"===e.type&&(t=this.handleTouchStart(e)),!t)return console.log("ERROR");const i=document.getElementById("canvas-container");if(t.detail.target!==i)return this.drawing=!1;this.drawing=!0,this.x=t.detail.x,this.y=t.detail.y,this.minX=Math.min(this.minX,this.x),this.maxX=Math.max(this.maxX,this.x),this.minY=Math.min(this.minY,this.y),this.maxY=Math.max(this.maxY,this.y),this.paths.push(["M",this.x,this.y]),this.path+=`M${this.x},${this.y}`},handlePanMove(e){if(!this.drawing)return;let t;if("mousemove"===e.type&&(t=this.handleMousemove(e)),"touchmove"===e.type&&(t=this.handleTouchmove(e)),!t)return console.log("ERROR");this.x=t.detail.x,this.y=t.detail.y,this.minX=Math.min(this.minX,this.x),this.maxX=Math.max(this.maxX,this.x),this.minY=Math.min(this.minY,this.y),this.maxY=Math.max(this.maxY,this.y),this.paths.push(["L",this.x,this.y]),this.path+=`L${this.x},${this.y}`},handlePanEnd(e){let t;if("mouseup"===e.type&&(t=this.handleMouseup(e)),"touchend"===e.type&&(t=this.handleTouchend(e)),!t)return console.log("ERROR");this.drawing=!1},onFinish(){if(!this.paths.length)return;const e=-(this.minX-10),t=-(this.minY-10),i=this.maxX-this.minX+20,n=this.maxY-this.minY+20;this.$emit("onFinish",{originWidth:i,originHeight:n,path:this.paths.reduce((i,n)=>i+n[0]+(n[1]+e)+","+(n[2]+t),"")})},onClose(){this.$emit("onCancel")}}}),re=se,le=(0,l.A)(re,ae,oe,!1,null,"735bb837",null),de=le.exports,he=i(340),ce=i(6563),ue=i(4787),ge=i(6915),pe=i.n(ge),fe=i(6376),me=i.n(fe);async function we({lines:e,fontSize:t,lineHeight:i,width:n,height:a,font:o,dy:s}){const r=new(pe())({margin:0,size:[n,a]}),l=r.pipe(me()());r.fontSize(t);const d=t*i;return e.forEach((e,t)=>{r.font(o).text(e,0,d*t+s,{lineBreak:!1})}),r.end(),new Promise(e=>{l.on("finish",function(){const t=l.toBlob("application/pdf"),i=new Response(t);e(i.arrayBuffer())})})}let ye=null;async function xe(){if(!ye){const e=await Promise.resolve().then(i.bind(i,340));ye=e.readAsArrayBuffer}return ye}async function ve(e,t,i,n=!1,a){const o=await xe();let s;try{s=await ce.UL4.load(await o(e))}catch(l){throw console.log("Failed to load PDF."),l}const r=s.getPages().map(async(e,i)=>{const n=t[i],a=e.getHeight(),r=n.map(async t=>{if("image"===t.type){const{file:i,x:n,y:r,width:d,height:h}=t;let c;try{return c="string"===typeof i&&i.startsWith("http")?await s.embedPng(await fetch(i).then(e=>e.arrayBuffer())):"image/jpeg"===i.type?await s.embedJpg(await o(i)):await s.embedPng(await o(i)),()=>e.drawImage(c,{x:n,y:a-r-h,width:d,height:h})}catch(l){return console.log("Failed to embed image.",l),X}}else{if("text"===t.type){const{x:i,y:n,lines:o,lineHeight:r,size:l,fontFamily:d,width:h}=t,c=l*r*o.length,u=await f(d),[g]=await s.embedPdf(await we({lines:o,fontSize:l,lineHeight:r,width:h,height:c,font:u.buffer||d,dy:u.correction(l,r)}));return()=>e.drawPage(g,{width:h,height:c,x:i,y:a-n-c})}if("drawing"===t.type){const{x:i,y:n,path:o,scale:s}=t,{Tly:r,JlX:l,eHj:d,BI_:h,uT$:c,wdZ:u}=ce;return()=>{e.pushOperators(r(),l(c.Round),h(u.Round)),e.drawSvgPath(o,{borderWidth:5,scale:s,x:i,y:a-n}),e.pushOperators(d())}}}}),d=await Promise.all(r);d.forEach(e=>e())});await Promise.all(r);try{const e=await s.save();if(n)return void a(e);ue(e,i,"application/pdf")}catch(l){throw console.log("Failed to save PDF."),l}}var be=i(1314),Ce=i(1121),Pe=i(464),Ie=i(6436),Fe={name:"VuePdfEditor",components:{PDFPage:P,ImageItem:T,TextItem:J,Drawing:ne,DrawingCanvas:de,ImageIcon:be.A,TextIcon:Ce.A,GestureIcon:Pe.A,PencilIcon:Ie.A},props:{msg:String,width:{type:String,default:"100%"},height:{type:String,default:"100%"},showChooseFileBtn:{type:Boolean,default:!1},showCustomizeEditor:{type:Boolean,default:!0},showCustomizeEditorAddText:{type:Boolean,default:!0},showCustomizeEditorAddImg:{type:Boolean,default:!0},showCustomizeEditorAddDraw:{type:Boolean,default:!0},showLineSizeSelect:{type:Boolean,default:!0},showFontSizeSelect:{type:Boolean,default:!0},showFontSelect:{type:Boolean,default:!0},showRename:{type:Boolean,default:!0},showSaveBtn:{type:Boolean,default:!0},loadDefaultFile:{type:Boolean,default:!0},saveToUpload:{type:Boolean,default:!1},initFiles:{type:Array,default:()=>[]},initFileNames:{type:Array,default:()=>[]},initTextFields:{type:Array,default:null},textDefaultSize:{type:Number,default:12},initImageUrls:{type:Array,default:null},initImageScale:{type:Number,default:.2},sealImageShow:{type:Boolean,default:!1},sealImageUrl:{type:String,default:"assets/img/sealImag.png"},sealImageHiddenOnSave:{type:Boolean,default:!1},initialScale:{type:Number,default:1},pageCountFormat:{type:String,default:"{currentPage} de {totalPages}"},showPageFooter:{type:Boolean,default:!0}},data(){return{wheelZoomCount:0,narrowEnlargeShow:!1,scale:this.initialScale,pdfDocuments:[],selectedDocIndex:-1,currentFont:"Courier",focusId:null,selectedPageIndex:-1,saving:!1,addingDrawing:!1}},computed:{pdfName:{get(){return this.selectedDocIndex>=0&&this.selectedDocIndex<this.pdfDocuments.length?this.pdfDocuments[this.selectedDocIndex].name:""},set(e){this.selectedDocIndex>=0&&this.selectedDocIndex<this.pdfDocuments.length&&(this.pdfDocuments[this.selectedDocIndex].name=e)}}},watch:{scale(e,t){e!==t&&this.$emit("scale-changed",e)}},async mounted(){await this.init()},created(){},methods:{wheelZoom(e){e.stopPropagation(),e.preventDefault(),this.wheelZoomCount++,this.wheelZoomCount<3||(this.wheelZoomCount=0,e.deltaY>0?this.narrow():e.deltaY<0&&this.enlarge())},enlarge(){this.scale>=2||(this.scale=parseFloat((this.scale+.1).toFixed(1)))},narrow(){this.scale<=.1||(this.scale=parseFloat((this.scale-.1).toFixed(1)))},async init(){if(0!==this.initFiles.length)try{for(let e=0;e<this.initFiles.length;e++){const t=this.initFileNames[e]||"";await this.addPDF(this.initFiles[e],t)}this.selectedDocIndex=0,this.selectedPageIndex=0,f(this.currentFont),this.narrowEnlargeShow=!0,this.initTextField(),this.$nextTick(()=>{this.$emit("pdf-editor:ready")})}catch(e){console.log(e)}else console.log("init files do not exist")},initTextField(){if(this.selectedPageIndex<0||this.selectedDocIndex<0||null===this.initTextFields||0===this.initTextFields.length)return;const e=this.pdfDocuments[this.selectedDocIndex];for(let i=0;i<e.pages.length;i++){this.selectedPageIndex=i;for(let e=0;e<this.initTextFields.length;e++){const t=this.initTextFields[e];this.addTextField(t,0,60*e,this.selectedPageIndex)}}this.selectedPageIndex=0;const t=setInterval(()=>{if(this.$refs.textItem&&this.$refs.textItem.length===this.initTextFields.length*e.pages.length){const e=document.getElementById("pdfBody");e&&e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window})),clearInterval(t)}},100)},async initImages(){if(this.selectedPageIndex<0||this.selectedDocIndex<0)return;const e=this.pdfDocuments[this.selectedDocIndex];for(let t=0;t<e.pages.length;t++){this.selectedPageIndex=t;let e=0;if(null!==this.initImageUrls&&0!==this.initImageUrls.length)for(let t=0;t<this.initImageUrls.length;t++)e=0===this.initTextFields.length?100*t:100*(t-1+this.initTextFields.length),await this.addImage(this.initImageUrls[t],0,e,1);if(this.sealImageShow){const t=await fetch(this.sealImageUrl);await this.addImage(await t.blob(),0,100*(e+1),.4,!0)}}this.selectedPageIndex=0},onFinishDrawingCanvas(e){const{originWidth:t,originHeight:i,path:n}=e;let a=1;t>500&&(a=500/t),this.addDrawing(t,i,n,a),this.onCancelDrawingCanvas()},onCancelDrawingCanvas(){this.addingDrawing=!1},genID(){let e=0;return function(){return e++}},addObjectToPage(e,t,i=this.selectedDocIndex){if(i<0||i>=this.pdfDocuments.length)return console.error("VuePdfEditor.addObjectToPage: Invalid document index"),!1;if(t<0||t>=this.pdfDocuments[i].pages.length)return console.error("VuePdfEditor.addObjectToPage: Invalid page index"),!1;const n=this.pdfDocuments[i];return n.allObjects=n.allObjects.map((i,n)=>n===t?[...i,e]:i),!0},getAllObjects(e=this.selectedDocIndex){if(e<0||e>=this.pdfDocuments.length)return console.error("VuePdfEditor.getAllObjects: Invalid document index"),[];const t=this.pdfDocuments[e],i=this.scale||1,n=[];return t.allObjects.forEach((t,a)=>{const o=this.$refs[`page${e}-${a}`];if(!o||!o[0])return void console.warn(`VuePdfEditor.getAllObjects: Cannot access page ${e}-${a} ref`);const s=o[0].getCanvasMeasurement(),r=s.canvasHeight/i;t.forEach(e=>{n.push({...e,pageIndex:a,pageNumber:a+1,scale:i,normalizedCoordinates:{llx:parseInt(e.x),lly:parseInt(r-e.y),ury:parseInt(r-e.y-e.height),urx:parseInt(e.x+e.width),width:parseInt(e.width),height:parseInt(e.height)}})})}),n},async onUploadPDF(e){const t=e.target.files||e.dataTransfer&&e.dataTransfer.files;if(t&&0!==t.length){this.selectedPageIndex=-1,this.selectedDocIndex=-1;try{for(let e=0;e<t.length;e++){const i=t[e];i&&"application/pdf"===i.type&&await this.addPDF(i)}this.narrowEnlargeShow=!0,this.selectedDocIndex=0,this.selectedPageIndex=0}catch(e){console.log(e)}this.initTextField(),await this.initImages(),e.target.value=null}},resetDefaultState(){this.pdfDocuments=[],this.selectedDocIndex=-1},async addPDF(e,t=""){try{0===this.pdfDocuments.length&&this.resetDefaultState();const i=e;let n="";if(n=t||(e instanceof File&&e.name?e.name:`document_${(new Date).getTime()}.pdf`),e instanceof File){const t=new Blob([e]);e=await t.arrayBuffer()}const a=await(0,he.Xb)(e);if(a){const e=a.numPages,t=Array(e).fill().map((e,t)=>a.getPage(t+1)),o=t.map(()=>[]),s=Array(e).fill(1);this.pdfDocuments.push({file:i,name:n,numPages:e,pdfDocument:a,pages:t,pagesScale:s,allObjects:o});const r={allObjects:o,numPages:e,pages:t,measurement:[],pdfName:n};Promise.all(t).then(e=>{e.forEach(e=>{const t=e.getViewport().viewBox;r.measurement[e.pageNumber]={width:t[2],height:t[3]}}),this.$emit("pdf-editor:end-init",r)})}}catch(i){throw console.log("Failed to add pdf."),i}},async onUploadImage(e){const t=e.target.files[0];t&&this.selectedPageIndex>=0&&this.selectedDocIndex>=0&&await this.addImage(t),e.target.value=null},async addImage(e,t=0,i=0,n=1,a=!1){try{let o;o="string"===typeof e&&e.startsWith("http")?e:await(0,he._v)(e);const s=await(0,he.Kd)(o),r=this.genID(),{width:l,height:d}=s,h={id:r,type:"image",width:l*n,height:d*n,originWidth:l,originHeight:d,x:t,y:i,isSealImage:a,payload:s,file:e};this.addObject(h)}catch(o){console.log("Fail to add image.",o)}},onAddTextField(){this.selectedPageIndex>=0&&this.selectedDocIndex>=0&&this.addTextField()},addTextField(e="Please enter here",t=0,i=0,n=this.selectedPageIndex){if(this.selectedDocIndex<0)return;const a=this.genID();f(this.currentFont);const o={id:a,text:e,type:"text",size:this.textDefaultSize,lineHeight:1.4,fontFamily:this.currentFont,x:t,y:i,currentPage:n};this.addObject(o)},onAddDrawing(){this.selectedPageIndex>=0&&this.selectedDocIndex>=0&&(this.addingDrawing=!0)},addDrawing(e,t,i,n=1){if(this.selectedDocIndex<0)return;const a=this.genID(),o={id:a,path:i,type:"drawing",x:0,y:0,originWidth:e,originHeight:t,width:e*n,height:t*n,scale:n};this.addObject(o)},addObject(e){if(this.selectedDocIndex<0)return;const t=this.pdfDocuments[this.selectedDocIndex];t.allObjects=t.allObjects.map((t,i)=>i===this.selectedPageIndex?[...t,e]:t)},selectFontFamily(e){const t=e.name;f(t),this.currentFont=t},selectPage(e,t){this.selectedDocIndex=e,this.selectedPageIndex=t},updateObject(e,t,i){if(e<0||e>=this.pdfDocuments.length)return;const n=this.pdfDocuments[e];n.allObjects=n.allObjects.map((e,n)=>n===(void 0!==i.currentPage?i.currentPage:this.selectedPageIndex)?e.map(e=>e.id===t?{...e,...i}:e):e)},deleteObject(e,t){if(e<0||e>=this.pdfDocuments.length)return;const i=this.pdfDocuments[e];i.allObjects=i.allObjects.map((e,i)=>i===this.selectedPageIndex?e.filter(e=>e.id!==t):e)},onMeasure(e,t,i){t<0||t>=this.pdfDocuments.length||(this.pdfDocuments[t].pagesScale[i]=e.scale,this.$forceUpdate())},renamePDF(e){e.focus()},formatPageCount(e,t){return this.pageCountFormat.replace("{currentPage}",e).replace("{totalPages}",t)},async savePDF(){if(0!==this.pdfDocuments.length&&!this.saving){this.saving=!0;try{for(const e of this.pdfDocuments){const t=[];let i=[],n=!1;if(this.sealImageShow)for(let o=0;o<e.pages.length;o++){const a=e.allObjects[o].find(e=>!0===e.isSealImage);if(a){n=!0;const s=await e.pages[o].then(e=>e);t.push({page:s._pageIndex,pageWidth:s._pageInfo.view[2],pageHeight:s._pageInfo.view[3],x:a.x+60,y:a.y+60}),this.sealImageHiddenOnSave&&i.push(e.allObjects[o].filter(e=>e!==a))}else this.sealImageHiddenOnSave&&i.push(e.allObjects[o])}const a=this.sealImageShow&&this.sealImageHiddenOnSave&&n?i:e.allObjects;await ve(e.file,a,e.name,this.saveToUpload,i=>{this.$emit("onSave2Upload",{pdfBytes:i,fileName:e.name,sealInfo:t})})}}catch(e){console.log(e)}finally{this.saving=!1}}}}},Se=Fe,De=(i(5215),(0,l.A)(Se,c,u,!1,null,"8048ab00",null)),_e=De.exports;i(6512);_e.install=function(e){_e.install.installed||e.component(_e.name,_e)},"undefined"!==typeof window&&window.Vue&&_e.install(window.Vue);var ke=_e;n.Ay.use(ke),n.Ay.config.productionTip=!1,new n.Ay({render:e=>e(h)}).$mount("#app")},4808:function(e,t,i){var n=i(7899);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(5312).A;a("60a3608a",n,!0,{sourceMap:!1,shadowMode:!1})},5128:function(e,t,i){"use strict";i.r(t);var n=i(9248),a=i.n(n),o=i(9089),s=i.n(o),r=s()(a());r.push([e.id,'/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,::backdrop,:after,:before{--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-border-style:solid;--tw-leading:initial;--tw-font-weight:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-outline-style:solid}}}@layer theme{:host,:root{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-500:oklch(63.7% .237 25.331);--color-red-700:oklch(50.5% .213 27.518);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-white:#fff;--spacing:.25rem;--container-xs:20rem;--text-sm:.875rem;--text-sm--line-height:1.42857;--text-3xl:1.875rem;--text-3xl--line-height:1.2;--font-weight-bold:700;--leading-tight:1.25;--radius-sm:.25rem;--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,::backdrop,:after,:before{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}:host,html{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}menu,ol,ul{list-style:none}audio,canvas,embed,iframe,img,object,svg,video{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,optgroup,select,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit,::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.pointer-events-none{pointer-events:none}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.inset-y-0{inset-block:calc(var(--spacing)*0)}.top-0{top:calc(var(--spacing)*0)}.right-0{right:calc(var(--spacing)*0)}.bottom-0{bottom:calc(var(--spacing)*0)}.left-0{left:calc(var(--spacing)*0)}.z-10{z-index:10}.mr-2{margin-right:calc(var(--spacing)*2)}.mr-3{margin-right:calc(var(--spacing)*3)}.mr-4{margin-right:calc(var(--spacing)*4)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.block{display:block}.contents{display:contents}.flex{display:flex}.hidden{display:none}.h-1{height:calc(var(--spacing)*1)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-7{height:calc(var(--spacing)*7)}.h-8{height:calc(var(--spacing)*8)}.h-12{height:calc(var(--spacing)*12)}.h-full{height:100%}.w-1{width:calc(var(--spacing)*1)}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-7{width:calc(var(--spacing)*7)}.w-8{width:calc(var(--spacing)*8)}.w-12{width:calc(var(--spacing)*12)}.w-20{width:calc(var(--spacing)*20)}.w-24{width:calc(var(--spacing)*24)}.w-32{width:calc(var(--spacing)*32)}.w-full{width:100%}.max-w-xs{max-width:var(--container-xs)}.flex-shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.origin-top-left{transform-origin:0 0}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.cursor-ew-resize{cursor:ew-resize}.cursor-grab{cursor:grab}.cursor-grabbing{cursor:grabbing}.cursor-nesw-resize{cursor:nesw-resize}.cursor-not-allowed{cursor:not-allowed}.cursor-ns-resize{cursor:ns-resize}.cursor-nwse-resize{cursor:nwse-resize}.cursor-pointer{cursor:pointer}.resize{resize:both}.appearance-none{appearance:none}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.overflow-hidden{overflow:hidden}.rounded{border-radius:.25rem}.rounded-full{border-radius:3.40282e+38px}.rounded-sm{border-radius:var(--radius-sm)}.border{border-style:var(--tw-border-style);border-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-r{border-right-style:var(--tw-border-style);border-right-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-dotted{--tw-border-style:dotted;border-style:dotted}.border-gray-300{border-color:var(--color-gray-300)}.border-gray-400{border-color:var(--color-gray-400)}.border-gray-500{border-color:var(--color-gray-500)}.border-gray-600{border-color:var(--color-gray-600)}.border-gray-800{border-color:var(--color-gray-800)}.bg-blue-500{background-color:var(--color-blue-500)}.bg-blue-600{background-color:var(--color-blue-600)}.bg-blue-700{background-color:var(--color-blue-700)}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-200{background-color:var(--color-gray-200)}.bg-gray-300{background-color:var(--color-gray-300)}.bg-gray-400{background-color:var(--color-gray-400)}.bg-gray-500{background-color:var(--color-gray-500)}.bg-red-500{background-color:var(--color-red-500)}.bg-transparent{background-color:#0000}.bg-white{background-color:var(--color-white)}.fill-current{fill:currentColor}.p-5{padding:calc(var(--spacing)*5)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-5{padding-inline:calc(var(--spacing)*5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-12{padding-block:calc(var(--spacing)*12)}.pt-5{padding-top:calc(var(--spacing)*5)}.pr-8{padding-right:calc(var(--spacing)*8)}.pb-5{padding-bottom:calc(var(--spacing)*5)}.pl-2{padding-left:calc(var(--spacing)*2)}.text-center{text-align:center}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.leading-tight{--tw-leading:var(--leading-tight);line-height:var(--leading-tight)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-white{color:var(--color-white)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.outline{outline-style:var(--tw-outline-style);outline-width:1px}.outline-none{--tw-outline-style:none;outline-style:none}.select-none{-webkit-user-select:none;user-select:none}@media (hover:hover){.hover\\:bg-blue-700:hover{background-color:var(--color-blue-700)}.hover\\:bg-gray-500:hover{background-color:var(--color-gray-500)}.hover\\:bg-red-700:hover{background-color:var(--color-red-700)}}@media (min-width:48rem){.md\\:mr-4{margin-right:calc(var(--spacing)*4)}.md\\:flex{display:flex}.md\\:hidden{display:none}.md\\:w-40{width:calc(var(--spacing)*40)}.md\\:px-4{padding-inline:calc(var(--spacing)*4)}}}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-outline-style{syntax:"*";inherits:false;initial-value:solid}',""]),t["default"]=r},5215:function(e,t,i){var n=i(2508);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(5312).A;a("a68b14f8",n,!0,{sourceMap:!1,shadowMode:!1})},5945:function(e,t,i){"use strict";i.r(t);var n=i(9248),a=i.n(n),o=i(9089),s=i.n(o),r=s()(a());r.push([e.id,".whitespace-no-wrap[data-v-19e49efc]{white-space:nowrap}.outline-none[data-v-19e49efc]{outline:0}",""]),t["default"]=r},6512:function(e,t,i){var n=i(5128);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(5312).A;a("9b19c26c",n,!0,{sourceMap:!1,shadowMode:!1})},6586:function(e,t,i){var n=i(249);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var a=i(5312).A;a("b22d9874",n,!0,{sourceMap:!1,shadowMode:!1})},7899:function(e,t,i){"use strict";i.r(t);var n=i(9248),a=i.n(n),o=i(9089),s=i.n(o),r=s()(a());r.push([e.id,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#000}",""]),t["default"]=r}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,n,a,o){if(!n){var s=1/0;for(h=0;h<e.length;h++){n=e[h][0],a=e[h][1],o=e[h][2];for(var r=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(i.O).every(function(e){return i.O[e](n[l])})?n.splice(l--,1):(r=!1,o<s&&(s=o));if(r){e.splice(h--,1);var d=a();void 0!==d&&(t=d)}}return t}o=o||0;for(var h=e.length;h>0&&e[h-1][2]>o;h--)e[h]=e[h-1];e[h]=[n,a,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p="/vue-pdf-editor/"}(),function(){var e={57:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,s=n[0],r=n[1],l=n[2],d=0;if(s.some(function(t){return 0!==e[t]})){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(l)var h=l(i)}for(t&&t(n);d<s.length;d++)o=s[d],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(h)},n=self["webpackChunk_libresign_vue_pdf_editor"]=self["webpackChunk_libresign_vue_pdf_editor"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504],function(){return i(4075)});n=i.O(n)})();