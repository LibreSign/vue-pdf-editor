(function(){var t={249:function(t,e,i){"use strict";i.r(e);var n=i(9248),a=i.n(n),o=i(9089),s=i.n(o),r=s()(a());r.push([t.id,".operation[data-v-4c87c9c0]{background-color:rgba(0,0,0,.3)}.selector[data-v-4c87c9c0]{border-radius:10px;width:12px;height:12px;margin-left:-6px;margin-top:-6px;background-color:#32b5fe;border:1px solid #32b5fe}.delete[data-v-4c87c9c0]{border-radius:10px;width:18px;height:18px;margin-left:-9px;margin-top:-9px;background-color:#fff}",""]),e["default"]=r},340:function(t,e,i){"use strict";i.d(e,{Kd:function(){return s},Xb:function(){return l},_v:function(){return r},readAsArrayBuffer:function(){return o}});i(8259),i(5487),i(4322);var n=i(1100),a=i(8443);function o(t){return new Promise((e,i)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=i,n.readAsArrayBuffer(t)})}function s(t){return new Promise((e,i)=>{const n=new Image;if(n.onload=()=>e(n),n.onerror=i,t instanceof Blob){const e=window.URL.createObjectURL(t);n.src=e}else n.setAttribute("crossOrigin","anonymous"),n.src=t})}function r(t){return new Promise((e,i)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=i,n.readAsDataURL(t)})}async function l(t){return(0,n.YE)(t).promise}n.EA.workerSrc=a},477:function(){},1136:function(t,e,i){"use strict";i.r(e);var n=i(9248),a=i.n(n),o=i(9089),s=i.n(o),r=s()(a());r.push([t.id,".shadowOutline[data-v-1fe35f5f]{box-shadow:0 0 0 3px rgba(66,153,225,.5)}.noTouchAction[data-v-1fe35f5f]{touch-action:none}h3[data-v-1fe35f5f]{margin:40px 0 0}ul[data-v-1fe35f5f]{list-style-type:none;padding:0}li[data-v-1fe35f5f]{display:inline-block;margin:0 10px}a[data-v-1fe35f5f]{color:#42b983}",""]),e["default"]=r},1214:function(t,e,i){var n=i(3629);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=i(5312).A;a("40bde81e",n,!0,{sourceMap:!1,shadowMode:!1})},2536:function(t,e,i){var n=i(5945);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=i(5312).A;a("17555429",n,!0,{sourceMap:!1,shadowMode:!1})},3357:function(t,e,i){"use strict";var n=i(410),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("VuePdfEditor",{ref:"vuePdfEditor",attrs:{width:"100%",height:"100%","show-choose-file-btn":!0,"show-customize-editor":!0,"show-customize-editor-add-text":!0,"show-customize-editor-add-img":!0,"show-customize-editor-add-draw":!0,"show-line-size-select":!0,"show-font-size-select":!0,"show-font-select":!0,"show-rename":!0,"show-save-btn":!0,"init-file-src":t.initFile,"init-file-name":t.initFileName,"init-text-fields":this.textFields,"init-image-urls":this.imageUrls,"init-image-scale":1,"save-to-upload":!1,"seal-image-show":!0,"seal-image-hidden-on-save":!1,"show-page-footer":!0,"page-count-format":"{currentPage} of {totalPages}"},on:{onSave2Upload:t.save2Upload}})],1)},o=[],s={name:"App",data(){return{initFileName:"test.pdf",initFile:"",textFields:["initial text"],imageUrls:[]}},methods:{save2Upload(t){console.log("PDF saved:",t.fileName),console.log("PDF bytes:",t.pdfBytes),console.log("Seal info:",t.sealInfo)}}},r=s,l=(i(9632),i(1656)),d=(0,l.A)(r,a,o,!1,null,null,null),h=d.exports,c=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{margin:"0 auto",overflow:"hidden",position:"relative"},style:{width:t.width,height:t.height}},[e("div",{ref:"scrollBox",staticClass:"flex-col py-12 items-center bg-gray-100",staticStyle:{width:"100%",height:"100%",overflow:"auto"},on:{wheel:[function(e){return e.ctrlKey?t.wheelZoom.apply(null,arguments):null},function(e){return e.metaKey?t.wheelZoom.apply(null,arguments):null}]}},[t.showChooseFileBtn||t.showCustomizeEditor||t.showSaveBtn?e("div",{staticClass:"z-10 top-0 left-0 right-0 z-10 h-12 flex justify-center items-center bg-gray-200 border-b border-gray-300",staticStyle:{position:"absolute"}},[e("input",{staticClass:"hidden",attrs:{id:"pdf",type:"file",name:"pdf",multiple:""},on:{change:t.onUploadPDF}}),e("input",{staticClass:"hidden",attrs:{id:"image",type:"file",name:"image"},on:{change:t.onUploadImage}}),t.showChooseFileBtn?e("label",{staticClass:"whitespace-no-wrap bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 md:px-4 rounded mr-3 cursor-pointer md:mr-4",attrs:{for:"pdf"}},[t._v(" Select PDF ")]):t._e(),e("button",{directives:[{name:"show",rawName:"v-show",value:t.narrowEnlargeShow,expression:"narrowEnlargeShow"}],staticClass:"w-7 h-7 bg-blue-500 hover:bg-blue-700 text-white font-bold flex items-center justify-center mr-3 md:mr-4 rounded-full",on:{click:t.narrow}},[t._v(" - ")]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.narrowEnlargeShow,expression:"narrowEnlargeShow"}],staticClass:"w-7 h-7 bg-blue-500 hover:bg-blue-700 text-white font-bold flex items-center justify-center mr-3 md:mr-4 rounded-full",on:{click:t.enlarge}},[t._v(" + ")]),t.showCustomizeEditor?e("div",{staticClass:"relative mr-3 flex h-8 bg-gray-400 rounded-sm overflow-hidden md:mr-4"},[t.showCustomizeEditorAddImg?e("label",{staticClass:"flex items-center justify-center h-full w-8 hover:bg-gray-500 cursor-pointer",class:[t.selectedPageIndex<0?"cursor-not-allowed bg-gray-500":""],attrs:{title:"add pictures",for:"image"}},[e("ImageIcon",{attrs:{size:20,title:"An icon for adding images"}})],1):t._e(),t.showCustomizeEditorAddText?e("label",{staticClass:"flex items-center justify-center h-full w-8 hover:bg-gray-500 cursor-pointer",class:[t.selectedPageIndex<0?"cursor-not-allowed bg-gray-500":""],attrs:{title:"Add text",for:"text"},on:{click:t.onAddTextField}},[e("TextIcon",{attrs:{size:20,title:"An icon for adding text"}})],1):t._e(),t.showCustomizeEditorAddDraw?e("label",{staticClass:"flex items-center justify-center h-full w-8 hover:bg-gray-500 cursor-pointer",class:[t.selectedPageIndex<0?"cursor-not-allowed bg-gray-500":""],attrs:{title:"Add a handwriting"},on:{click:t.onAddDrawing}},[e("GestureIcon",{attrs:{size:20,title:"An icon for adding drawing"}})],1):t._e()]):t._e(),t.showRename&&1===t.pdfDocuments.length?e("div",{staticClass:"justify-center mr-3 md:mr-4 w-full max-w-xs hidden md:flex"},[e("PencilIcon",{staticClass:"mr-2",attrs:{size:20,title:"a pen, edit pdf name"},on:{click:function(e){return t.renamePDF(t.$refs.renamePDFInputOne)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pdfName,expression:"pdfName"}],ref:"renamePDFInputOne",staticClass:"flex-grow bg-transparent",attrs:{title:"Rename PDF here",placeholder:"Rename PDF here",type:"text"},domProps:{value:t.pdfName},on:{input:function(e){e.target.composing||(t.pdfName=e.target.value)}}})],1):t._e(),t.showSaveBtn?e("button",{staticClass:"w-20 bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 md:px-4 mr-3 md:mr-4 rounded",class:[0===t.pdfDocuments.length||t.saving?"cursor-not-allowed bg-blue-700":""],on:{click:t.savePDF}},[t._v(" "+t._s(t.saving?"saving":"keep")+" ")]):t._e()]):t._e(),t.addingDrawing?e("div",[e("div",{staticClass:"fixed z-10 top-0 left-0 right-0 border-b border-gray-300 bg-white shadow-lg",staticStyle:{height:"50%"}},[e("DrawingCanvas",{on:{onFinish:t.onFinishDrawingCanvas,onCancel:t.onCancelDrawingCanvas}})],1)]):t._e(),t.pdfDocuments.length?e("div",{ref:"pdfBody",staticClass:"w-full",attrs:{id:"pdfBody"}},[t.showRename&&1===t.pdfDocuments.length?e("div",{staticClass:"flex justify-center px-5 pt-5 w-full md:hidden"},[e("div",{staticClass:"flex items-center"},[e("PencilIcon",{staticClass:"mr-2",attrs:{size:20,title:"a pen, edit pdf name"},on:{click:function(e){return t.renamePDF(t.$refs.renamePDFInputTwo)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pdfName,expression:"pdfName"}],ref:"renamePDFInputTwo",staticClass:"flex-grow bg-transparent justify-center",staticStyle:{"text-align":"center"},attrs:{title:"Rename PDF here",placeholder:"Rename PDF here",type:"text"},domProps:{value:t.pdfName},on:{input:function(e){e.target.composing||(t.pdfName=e.target.value)}}})],1)]):t._e(),e("div",{staticClass:"w-full",staticStyle:{"text-align":"center"}},t._l(t.pdfDocuments,function(i,n){return e("div",{key:n},t._l(i.pages,function(a,o){return e("div",{key:`${n}-${o}`,staticStyle:{display:"inline-block"}},[e("div",{class:["items-center",t.showPageFooter?(0===n&&0===o?"pt-5 px-5":"px-5")+(n===t.pdfDocuments.length-1&&o===i.pages.length-1?" pb-5":""):"p-5"],staticStyle:{"text-align":"center"},on:{mousedown:function(e){return t.selectPage(n,o)},touchstart:function(e){return t.selectPage(n,o)}}},[e("div",{staticStyle:{display:"inline-block"}},[e("div",{staticClass:"relative shadow-lg page",class:[n===t.selectedDocIndex&&o===t.selectedPageIndex?"shadowOutline":""]},[e("PDFPage",{ref:`page${n}-${o}`,refInFor:!0,attrs:{scale:t.scale,"data-key":`${n}-${o}`,page:a},on:{onMeasure:function(e){return t.onMeasure(e,n,o)}}}),e("div",{staticClass:"absolute top-0 left-0 transform origin-top-left noTouchAction",style:{transform:`scale(${i.pagesScale[o]})`}},t._l(i.allObjects[o],function(a,s){return e("div",{key:s},[e("div",["custom"===a.type?e("div",[t._t("custom",null,{object:a,pagesScale:i.pagesScale[o]})],2):"image"===a.type?e("div",[e("ImageItem",{attrs:{file:a.file,payload:a.payload,x:a.x,y:a.y,"fix-size":a.isSealImage,width:a.width,height:a.height,"origin-width":a.originWidth,"origin-height":a.originHeight,"page-scale":i.pagesScale[o]},on:{onUpdate:function(e){return t.updateObject(n,a.id,e)},onDelete:function(e){return t.deleteObject(n,a.id)}}})],1):"text"===a.type?e("div",[e("TextItem",{ref:"textItem",refInFor:!0,attrs:{text:a.text,x:a.x,y:a.y,width:a.width,height:a.height,"show-line-size-select":t.showLineSizeSelect,"show-font-size-select":t.showFontSizeSelect,"show-font-select":t.showFontSelect,size:a.size,"line-height":a.lineHeight,"font-family":a.fontFamily,"current-page":a.currentPage,"page-scale":i.pagesScale[o]},on:{onUpdate:function(e){return t.updateObject(n,a.id,e)},onDelete:function(e){return t.deleteObject(n,a.id)},onSelectFont:t.selectFontFamily}})],1):"drawing"===a.type?e("div",[e("Drawing",{attrs:{path:a.path,x:a.x,y:a.y,width:a.width,height:a.height,"origin-width":a.originWidth,"origin-height":a.originHeight,"page-scale":i.pagesScale[o]},on:{onUpdate:function(e){return t.updateObject(n,a.id,e)},onDelete:function(e){return t.deleteObject(n,a.id)}}})],1):t._e()])])}),0)],1)]),t.showPageFooter?e("div",{staticClass:"flex justify-between items-center pb-5 text-sm text-gray-600"},[e("span",[t._v(t._s(i.name))]),e("span",[t._v(t._s(t.formatPageCount(o+1,i.numPages)))])]):t._e()])])}),0)}),0)]):t._e()])])},u=[];i(6323),i(6166),i(4599),i(9191),i(2306),i(7374),i(2439),i(2099),i(3640);const p={Courier:{correction(t,e){return(t*e-t)/2+t/6}},Helvetica:{correction(t,e){return(t*e-t)/2+t/10}},"Times-Roman":{correction(t,e){return(t*e-t)/2+t/7}}},g={...p};function m(t){if(p[t])return p[t];const e=g[t];if(!e)throw new Error(`Font '${t}' not exists.`);return p[t]=fetch(e.src).then(t=>t.arrayBuffer()).then(i=>{const n=new FontFace(t,i);return n.display="swap",n.load().then(()=>document.fonts.add(n)),{...e,buffer:i}}),p[t]}var f,w,b=function(){var t=this,e=t._self._c;return e("canvas",{ref:"canvas"})},x=[],y={name:"PDFPage",props:{page:{type:Promise},scale:{type:Number,default:1}},data(){return{dynamicScale:this.scale,clientWidth:null}},watch:{scale(t){this.dynamicScale=t,this.render()}},mounted(){this.render()},methods:{getCanvasMeasurement(){return{canvasWidth:this.$refs.canvas.width,canvasHeight:this.$refs.canvas.height}},measure(){this.$emit("onMeasure",{scale:this.dynamicScale})},async render(){const t=await this.page,e=this.$refs.canvas,i=e.getContext("2d"),n=t.getViewport({scale:this.dynamicScale,rotation:0});e.width=n.width,e.height=n.height,await t.render({canvasContext:i,viewport:n}).promise,this.measure(),window.addEventListener("resize",this.measure)}}},v=y,C=(0,l.A)(v,b,x,!1,null,"d050267c",null),P=C.exports,I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"absolute left-0 top-0 select-none",style:{width:`${t.width+t.dw}px`,height:`${Math.round((t.width+t.dw)/t.ratio)}px`,transform:t.translateCoordinates()}},[e("div",{staticClass:"absolute w-full h-full cursor-grab",class:["move"===t.operation?"cursor-grabbing":"",t.operation?"operation":""],on:{mousedown:t.handlePanStart,touchstart:t.handlePanStart}},[t.fixSize?t._e():e("div",{staticClass:"absolute cursor-nwse-resize transform selector",style:{top:"0%",left:"0%"},attrs:{"data-direction":"left-top"}}),t.fixSize?t._e():e("div",{staticClass:"absolute cursor-nesw-resize transform selector",style:{top:"0%",left:"100%"},attrs:{"data-direction":"right-top"}}),t.fixSize?t._e():e("div",{staticClass:"absolute cursor-nesw-resize transform selector",style:{top:"100%",left:"0%"},attrs:{"data-direction":"left-bottom"}}),t.fixSize?t._e():e("div",{staticClass:"absolute cursor-nwse-resize transform selector",style:{top:"100%",left:"100%"},attrs:{"data-direction":"right-bottom"}})]),e("div",{staticClass:"absolute cursor-pointer transform delete",style:{top:"0%",left:"50%"},on:{click:t.onDelete}},[e("CloseCircleIcon",{staticClass:"w-full h-full",attrs:{text:"Remove",fillColor:"red",size:25}})],1),e("canvas",{ref:"imgCanvas",staticClass:"w-full h-full border border-gray-400 border-dashed"})])},F=[],D={name:"PannableAreaMixin",data(){return{x_mixin:null,y_mixin:null,initialCanvasWidth:null,initialCanvasHeight:null}},created(){},methods:{getCurrentPageDimensions(){const t=this.$el?.closest(".page");if(!t)return{pageWidth:999999,pageHeight:999999};const e=t.querySelector("canvas");if(!e)return{pageWidth:999999,pageHeight:999999};if(!this.initialCanvasWidth){let t=this.$parent;while(t&&"VuePdfEditor"!==t.$options.name)t=t.$parent;const i=t?.scale||1;this.initialCanvasWidth=e.width/i,this.initialCanvasHeight=e.height/i}return{pageWidth:this.initialCanvasWidth,pageHeight:this.initialCanvasHeight}},handleMousedown(t){this.x_mixin=t.clientX,this.y_mixin=t.clientY;const e=t.target;return window.addEventListener("mousemove",this.handlePanMove),window.addEventListener("mouseup",this.handlePanEnd),{detail:{x:this.x_mixin,y:this.y_mixin,target:e}}},handleMousemove(t){const e=t.clientX-this.x_mixin,i=t.clientY-this.y_mixin;return this.x_mixin=t.clientX,this.y_mixin=t.clientY,{detail:{x:this.x_mixin,y:this.y_mixin,dx:e,dy:i}}},handleMouseup(t){this.x_mixin=t.clientX,this.y_mixin=t.clientY,window.removeEventListener("mousemove",this.handlePanMove),window.removeEventListener("mouseup",this.handlePanEnd);const{pageWidth:e,pageHeight:i}=this.getCurrentPageDimensions(),n=Math.max(0,Math.min(this.x+this.dx,e-this.width)),a=Math.max(0,Math.min(this.y+this.dy,i-this.height));return{detail:{x:n,y:a}}},handleTouchStart(t){if(t.touches.length>1)return;const e=t.touches[0];this.x_mixin=e.clientX,this.y_mixin=e.clientY;const i=e.target;return window.addEventListener("touchmove",this.handlePanMove,{passive:!1}),window.addEventListener("touchend",this.handlePanEnd),{detail:{x:this.x_mixin,y:this.y_mixin,target:i}}},handleTouchmove(t){if(t.touches.length>1)return;const e=t.touches[0],i=e.clientX-this.x_mixin,n=e.clientY-this.y_mixin;return this.x_mixin=e.clientX,this.y_mixin=e.clientY,{detail:{x:this.x_mixin,y:this.y_mixin,dx:i,dy:n}}},handleTouchend(t){const e=t.changedTouches[0];this.x_mixin=e.clientX,this.y_mixin=e.clientY,window.removeEventListener("touchmove",this.handlePanMove),window.removeEventListener("touchend",this.handlePanEnd);const{pageWidth:i,pageHeight:n}=this.getCurrentPageDimensions(),a=Math.max(0,Math.min(this.x+this.dx,i-this.width)),o=Math.max(0,Math.min(this.y+this.dy,n-this.height));return{detail:{x:a,y:o}}},translateCoordinates(){const{pageWidth:t,pageHeight:e}=this.getCurrentPageDimensions(),i=Math.max(0,Math.min(this.x+this.dx,t-this.width)),n=Math.max(0,Math.min(this.y+this.dy,e-this.height));return"translate("+i+"px, "+n+"px)"}}},S=D,_=(0,l.A)(S,f,w,!1,null,null,null),k=_.exports,z=i(9431),M={name:"ImageComponent",components:{CloseCircleIcon:z.A},mixins:[k],props:["payload","file","width","height","originWidth","originHeight","x","y","pageScale","fixSize"],data(){return{startX:null,startY:null,canvas:null,operation:"",directions:[],dx:0,dy:0,dw:0,dh:0}},computed:{ratio(){return this.originWidth/this.originHeight}},watch:{async file(t){t&&await this.render()}},async mounted(){await this.render()},methods:{async render(){const t=this.$refs.imgCanvas;t.width=this.originWidth,t.height=this.originHeight,t.getContext("2d").drawImage(this.payload,0,0);let e=1;const i=500;this.width>i&&(e=i/this.width),this.height>i&&(e=Math.min(e,i/this.height)),this.$emit("onUpdate",{width:this.width*e,height:this.height*e}),["image/jpeg","image/png","image/webp"].includes(this.file.type)||t.toBlob(t=>{this.$emit("onUpdate",{file:t})})},handlePanMove(t){let e;if("mousemove"===t.type&&(e=this.handleMousemove(t)),"touchmove"===t.type&&(e=this.handleTouchmove(t)),!e)return console.log("ERROR");const i=(e.detail.x-this.startX)/this.pageScale,n=(e.detail.y-this.startY)/this.pageScale;"move"===this.operation?(this.dx=i,this.dy=n):"scale"===this.operation&&(this.directions.includes("left")&&(this.dx=i,this.dw=-i),this.directions.includes("top")&&(this.dy=n,this.dh=-n),this.directions.includes("right")&&(this.dw=i),this.directions.includes("bottom")&&(this.dh=n))},handlePanEnd(t){let e;if("mouseup"===t.type&&(e=this.handleMouseup(t)),"touchend"===t.type&&(e=this.handleTouchend(t)),!e)return console.log("ERROR");"move"===this.operation?(this.$emit("onUpdate",{x:e.detail.x,y:e.detail.y}),this.dx=0,this.dy=0):"scale"===this.operation&&(this.$emit("onUpdate",{x:e.detail.x,y:e.detail.y,width:this.width+this.dw,height:Math.round((this.width+this.dw)/this.ratio)}),this.dx=0,this.dy=0,this.dw=0,this.dh=0,this.directions=[]),this.operation=""},handlePanStart(t){let e;return"mousedown"===t.type&&(e=this.handleMousedown(t)),"touchstart"===t.type&&(e=this.handleTouchStart(t)),e?(this.startX=e.detail.x,this.startY=e.detail.y,e.detail.target===t.currentTarget?this.operation="move":(this.operation="scale",void(this.directions=e.detail.target.dataset.direction.split("-")))):console.log("ERROR")},onDelete(){this.$emit("onDelete")}}},$=M,T=(i(6586),(0,l.A)($,I,F,!1,null,"4c87c9c0",null)),E=T.exports,O=function(){var t=this,e=t._self._c;return e("div",[e("TapoutComponent",{staticClass:"absolute left-0 top-0 select-none",style:{transform:t.translateCoordinates()},on:{tapout:t.onBlur}},["edit"===t.operation||"tool"===t.operation?e("TapoutComponent",{ref:"toolBox",staticClass:"h-full flex justify-center items-center bg-gray-300 border-b border-gray-400",staticStyle:{width:"400px",height:"40px"},on:{onfocus:t.onFocusTool,tapout:t.onBlurTool}},[t.showLineSizeSelect?e("div",{staticClass:"mr-2 flex items-center"},[e("FormatLineSpacingIcon",{staticClass:"w-6 mr-2",attrs:{title:"Line height"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.lineHeight_,expression:"lineHeight_"}],staticClass:"h-6 w-12 text-center flex-shrink-0 rounded-sm",attrs:{type:"number",min:"1",max:"10",step:"0.1"},domProps:{value:t.lineHeight_},on:{input:function(e){e.target.composing||(t.lineHeight_=e.target.value)}}})],1):t._e(),t.showFontSizeSelect?e("div",{staticClass:"mr-2 flex items-center"},[e("FormatSizeIcon",{staticClass:"w-6 mr-2",attrs:{title:"Font size"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.size_,expression:"size_"}],staticClass:"h-6 w-12 text-center flex-shrink-0 rounded-sm",attrs:{type:"number",min:"12",max:"120",step:"1"},domProps:{value:t.size_},on:{input:function(e){e.target.composing||(t.size_=e.target.value)}}})],1):t._e(),t.showFontSelect?e("div",{staticClass:"mr-2 flex items-center"},[e("FormatFontIcon",{staticClass:"w-4 mr-2",attrs:{title:"Font family"}}),e("div",{staticClass:"relative w-32 md:w-40"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.fontFamily_,expression:"fontFamily_"}],staticClass:"block appearance-none h-6 w-full bg-white pl-2 pr-8 rounded-sm leading-tight",on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.fontFamily_=e.target.multiple?i:i[0]},t.onChangeFont]}},t._l(t.Families,function(i,n){return e("option",{key:n,domProps:{value:i}},[t._v(" "+t._s(i)+" ")])}),0),e("div",{staticClass:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[e("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[e("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757\n                    6.586 4.343 8z"}})])])])],1):t._e(),e("div",{staticClass:"w-5 h-5 rounded-full bg-white cursor-pointer",on:{click:t.onDelete}},[e("CloseCircleIcon",{staticClass:"w-full h-full",attrs:{text:"Remove",fillColor:"red"}})],1)]):t._e(),e("div",{staticClass:"absolute w-full h-full cursor-grab border border-dotted border-gray-500",class:[t.operation?"":"cursor-grab","move"===t.operation?"cursor-grabbing":"",["edit","tool"].includes(t.operation)?"pointer-events-none border-gray-800 border-dashed":""],on:{mousedown:t.handlePanStart,touchstart:t.handlePanStart}}),e("div",{ref:"editable",staticClass:"outline-none whitespace-no-wrap",style:{fontSize:`${t.size_}px`,fontFamily:`${t.fontFamily_}, serif`,lineHeight:`${t.lineHeight_}`},attrs:{contenteditable:"true",spellcheck:"false"},on:{focus:t.onFocus,keydown:t.onKeydown,paste:function(e){return e.preventDefault(),t.onPaste.apply(null,arguments)}}})],1)],1)},A=[],j=function(){var t=this,e=t._self._c;return e("div",[t._t("default")],2)},B=[],R=(i(356),{name:"TapoutComponent",mounted(){window.addEventListener("touchstart",this.handleTapoutTouch),window.addEventListener("mousedown",this.handleTapoutMouse),this.$el.addEventListener("mousedown",this.handleFocus),this.$el.addEventListener("touchstart",this.handleFocus)},beforeDestroy(){window.removeEventListener("touchstart",this.handleTapoutTouch),window.removeEventListener("mousedown",this.handleTapoutMouse),this.$el.removeEventListener("mousedown",this.handleFocus),this.$el.removeEventListener("touchstart",this.handleFocus)},methods:{handleTapoutMouse(t){this.$el.contains(t.target)||this.$emit("tapout")},handleTapoutTouch(t){Array.from(t.touches).some(t=>this.$el.contains(t.target))||this.$emit("tapout")},handleFocus(){this.$emit("onfocus")}}}),H=R,L=(0,l.A)(H,j,B,!1,null,"65d69a1e",null),N=L.exports;function U(t){return new Promise(e=>setTimeout(e,t))}const X=()=>{};var Y=i(1478),W=i(3196),V=i(7476),Z={name:"TextComponent",components:{TapoutComponent:N,FormatLineSpacingIcon:Y.A,FormatSizeIcon:W.A,FormatFontIcon:V.A,CloseCircleIcon:z.A},mixins:[k],props:["size","text","lineHeight","x","y","fontFamily","pageScale","currentPage","showLineSizeSelect","showFontSelect","showFontSizeSelect"],data(){return{Families:Object.keys(g),startX:null,startY:null,dx:0,dy:0,width:0,height:0,operation:"",size_:this.size,lineHeight_:this.lineHeight,fontFamily_:this.fontFamily}},computed:{},watch:{},mounted(){this.render()},created(){},methods:{handlePanMove(t){let e;if("mousemove"===t.type&&(e=this.handleMousemove(t)),"touchmove"===t.type&&(e=this.handleTouchmove(t)),!e)return console.log("ERROR");this.dx=(e.detail.x-this.startX)/this.pageScale,this.dy=(e.detail.y-this.startY)/this.pageScale},handlePanEnd(t){let e;return"mouseup"===t.type&&(e=this.handleMouseup(t)),"touchend"===t.type&&(e=this.handleTouchend(t)),e?0===this.dx&&0===this.dy?this.$refs.editable.focus():(this.$emit("onUpdate",{x:e.detail.x,y:e.detail.y}),this.dx=0,this.dy=0,void(this.operation="")):console.log("ERROR")},handlePanStart(t){let e;if(this.width=this.$refs.editable.offsetWidth,this.height=this.$refs.editable.offsetHeight,"mousedown"===t.type&&(e=this.handleMousedown(t)),"touchstart"===t.type&&(e=this.handleTouchStart(t)),!e)return console.log("ERROR");this.startX=e.detail.x,this.startY=e.detail.y,this.operation="move"},onFocus(){this.operation="edit"},async onBlur(){"edit"===this.operation&&"tool"!==this.operation&&(this.$refs.editable.blur(),this.sanitize(),this.$emit("onUpdate",{currentPage:this.currentPage,lines:this.extractLines(),width:this.$refs.editable.clientWidth}),this.operation="")},async onPaste(t){const e=t.clipboardData.getData("text");document.execCommand("insertHTML",!1,e),await U(),this.sanitize()},onKeydown(t){const e=Array.from(this.$refs.editable.childNodes);if(13===t.keyCode){t.preventDefault();const i=window.getSelection(),n=i.focusNode,a=i.focusOffset;if(n===this.$refs.editable)this.$refs.editable.insertBefore(document.createElement("br"),e[a]);else if(n instanceof HTMLBRElement)this.$refs.editable.insertBefore(document.createElement("br"),n);else if(n.textContent.length!==a)document.execCommand("insertHTML",!1,"<br>");else{let t=n.nextSibling;t?this.$refs.editable.insertBefore(document.createElement("br"),t):(t=this.$refs.editable.appendChild(document.createElement("br")),t=this.$refs.editable.appendChild(document.createElement("br"))),i.collapse(t,0)}}},onFocusTool(){this.operation="tool"},async onBlurTool(){"tool"===this.operation&&"edit"!==this.operation&&(this.$emit("onUpdate",{currentPage:this.currentPage,lines:this.extractLines(),lineHeight:this.lineHeight_,size:this.size_,fontFamily:this.fontFamily_}),this.operation="")},sanitize(){let t;while(t=Array.from(this.$refs.editable.childNodes).find(t=>!["#text","BR"].includes(t.nodeName)))this.$refs.editable.removeChild(t)},onChangeFont(){this.$emit("onSelectFont",{name:this.fontFamily_})},render(){this.$refs.editable.innerText=this.text,this.$refs.editable.focus()},render4Init(){this.$refs.editable.innerText=this.text,this.$refs.editable.focus(),document.getElementById("pdfBody").dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window}))},extractLines(){const t=this.$refs.editable.childNodes,e=[];let i="";for(let n=0;n<t.length;n++){const a=t[n];"BR"===a.nodeName?(e.push(i),i=""):i+=a.textContent}return e.push(i),e},onDelete(){this.operation="",setTimeout(()=>{this.$emit("onDelete")},100)}}},K=Z,q=(i(2536),(0,l.A)(K,O,A,!1,null,"19e49efc",null)),G=q.exports,J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"absolute left-0 top-0 select-none",style:{width:`${t.width+t.dw}px`,height:(t.width+t.dw)/t.ratio+"px",transform:t.translateCoordinates()}},[e("div",{staticClass:"absolute w-full h-full cursor-grab border border-gray-400 border-dashed",class:["move"===t.operation?"cursor-grabbing":"",t.operation?"operation":""],on:{mousedown:t.handlePanStart,touchstart:t.handlePanStart}},[e("div",{staticClass:"absolute cursor-nwse-resize transform selector",style:{top:"0%",left:"0%"},attrs:{"data-direction":"left-top"}}),e("div",{staticClass:"absolute cursor-nwse-resize transform selector",style:{top:"100%",left:"100%"},attrs:{"data-direction":"right-bottom"}})]),e("div",{staticClass:"absolute cursor-pointer transform delete",style:{top:"0%",left:"50%"},on:{click:t.onDelete}},[e("CloseCircleIcon",{staticClass:"w-full h-full",attrs:{text:"Remove",fillColor:"red"}})],1),e("svg",{ref:"svg",attrs:{width:"100%",height:"100%"}},[e("path",{attrs:{"stroke-width":"5","stroke-linejoin":"round","stroke-linecap":"round",stroke:"black",fill:"none",d:t.path}})])])},Q=[],tt={name:"DrawingComponent",components:{CloseCircleIcon:z.A},mixins:[k],props:["originWidth","originHeight","width","height","x","y","pageScale","path"],data(){return{startX:null,startY:null,operation:"",dx:0,dy:0,dw:0,dh:0,direction:""}},computed:{ratio(){return this.originWidth/this.originHeight}},watch:{},mounted(){this.render()},created(){},methods:{async render(){this.$refs.svg.setAttribute("viewBox",`0 0 ${this.originWidth} ${this.originHeight}`)},handlePanMove(t){let e;if("mousemove"===t.type&&(e=this.handleMousemove(t)),"touchmove"===t.type&&(e=this.handleTouchmove(t)),!e)return console.log("ERROR");const i=(e.detail.x-this.startX)/this.pageScale,n=(e.detail.y-this.startY)/this.pageScale;if("move"===this.operation)this.dx=i,this.dy=n;else if("scale"===this.operation){if("left-top"===this.direction){let t=1/0;t=Math.min(i,n*this.ratio),this.dx=t,this.dw=-t,this.dy=t/this.ratio}if("right-bottom"===this.direction){let t=-1/0;t=Math.max(i,n*this.ratio),this.dw=t,this.dh=t/this.ratio}}},handlePanEnd(t){let e;if("mouseup"===t.type&&(e=this.handleMouseup(t)),"touchend"===t.type&&(e=this.handleTouchend(t)),!e)return console.log("ERROR");"move"===this.operation?(this.$emit("onUpdate",{x:e.detail.x,y:e.detail.y}),this.dx=0,this.dy=0):"scale"===this.operation&&(this.$emit("onUpdate",{x:e.detail.x,y:e.detail.y,width:this.width+this.dw,height:this.height+this.dh,scale:(this.width+this.dw)/this.originWidth}),this.dx=0,this.dy=0,this.dw=0,this.dh=0,this.direction=""),this.operation=""},handlePanStart(t){let e;return"mousedown"===t.type&&(e=this.handleMousedown(t)),"touchstart"===t.type&&(e=this.handleTouchStart(t)),e?(this.startX=e.detail.x,this.startY=e.detail.y,e.detail.target===t.currentTarget?this.operation="move":(this.operation="scale",void(this.direction=e.detail.target.dataset.direction))):console.log("ERROR")},onDelete(){this.$emit("onDelete")}}},et=tt,it=(i(1214),(0,l.A)(et,J,Q,!1,null,"80906ed2",null)),nt=it.exports,at=function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative w-full h-full"},[e("div",{staticClass:"relative w-full h-full select-none",attrs:{id:"canvas-container"},on:{mousedown:t.handlePanStart,touchstart:t.handlePanStart}},[e("svg",{staticClass:"relative w-full h-full pointer-events-none"},[e("path",{attrs:{"stroke-width":"5","stroke-linejoin":"round","stroke-linecap":"round",d:t.path,stroke:"black",fill:"none"}})])]),e("div",{staticClass:"absolute right-0 bottom-0 mr-4 mb-4 flex"},[e("button",{staticClass:"w-24 bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-4 rounded mr-4",on:{click:t.onClose}},[t._v(" Cancel ")]),e("button",{staticClass:"w-24 bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-4 rounded",on:{click:t.onFinish}},[t._v(" Finish ")])])])},ot=[],st=(i(966),{name:"DrawingCanvasComponent",mixins:[k],props:[],data(){return{x:0,y:0,path:"",minX:1/0,maxX:0,minY:1/0,maxY:0,paths:[],drawing:!1}},mounted(){},created(){},methods:{handlePanStart(t){let e;if("mousedown"===t.type&&(e=this.handleMousedown(t)),"touchstart"===t.type&&(e=this.handleTouchStart(t)),!e)return console.log("ERROR");const i=document.getElementById("canvas-container");if(e.detail.target!==i)return this.drawing=!1;this.drawing=!0,this.x=e.detail.x,this.y=e.detail.y,this.minX=Math.min(this.minX,this.x),this.maxX=Math.max(this.maxX,this.x),this.minY=Math.min(this.minY,this.y),this.maxY=Math.max(this.maxY,this.y),this.paths.push(["M",this.x,this.y]),this.path+=`M${this.x},${this.y}`},handlePanMove(t){if(!this.drawing)return;let e;if("mousemove"===t.type&&(e=this.handleMousemove(t)),"touchmove"===t.type&&(e=this.handleTouchmove(t)),!e)return console.log("ERROR");this.x=e.detail.x,this.y=e.detail.y,this.minX=Math.min(this.minX,this.x),this.maxX=Math.max(this.maxX,this.x),this.minY=Math.min(this.minY,this.y),this.maxY=Math.max(this.maxY,this.y),this.paths.push(["L",this.x,this.y]),this.path+=`L${this.x},${this.y}`},handlePanEnd(t){let e;if("mouseup"===t.type&&(e=this.handleMouseup(t)),"touchend"===t.type&&(e=this.handleTouchend(t)),!e)return console.log("ERROR");this.drawing=!1},onFinish(){if(!this.paths.length)return;const t=-(this.minX-10),e=-(this.minY-10),i=this.maxX-this.minX+20,n=this.maxY-this.minY+20;this.$emit("onFinish",{originWidth:i,originHeight:n,path:this.paths.reduce((i,n)=>i+n[0]+(n[1]+t)+","+(n[2]+e),"")})},onClose(){this.$emit("onCancel")}}}),rt=st,lt=(0,l.A)(rt,at,ot,!1,null,"735bb837",null),dt=lt.exports,ht=i(340),ct=i(6563),ut=i(4787),pt=i(6915),gt=i.n(pt),mt=i(6376),ft=i.n(mt);async function wt({lines:t,fontSize:e,lineHeight:i,width:n,height:a,font:o,dy:s}){const r=new(gt())({margin:0,size:[n,a]}),l=r.pipe(ft()());r.fontSize(e);const d=e*i;return t.forEach((t,e)=>{r.font(o).text(t,0,d*e+s,{lineBreak:!1})}),r.end(),new Promise(t=>{l.on("finish",function(){const e=l.toBlob("application/pdf"),i=new Response(e);t(i.arrayBuffer())})})}let bt=null;async function xt(){if(!bt){const t=await Promise.resolve().then(i.bind(i,340));bt=t.readAsArrayBuffer}return bt}async function yt(t,e,i,n=!1,a){const o=await xt();let s;try{s=await ct.UL4.load(await o(t))}catch(l){throw console.log("Failed to load PDF."),l}const r=s.getPages().map(async(t,i)=>{const n=e[i],a=t.getHeight(),r=n.map(async e=>{if("image"===e.type){const{file:i,x:n,y:r,width:d,height:h}=e;let c;try{return c="string"===typeof i&&i.startsWith("http")?await s.embedPng(await fetch(i).then(t=>t.arrayBuffer())):"image/jpeg"===i.type?await s.embedJpg(await o(i)):await s.embedPng(await o(i)),()=>t.drawImage(c,{x:n,y:a-r-h,width:d,height:h})}catch(l){return console.log("Failed to embed image.",l),X}}else{if("text"===e.type){const{x:i,y:n,lines:o,lineHeight:r,size:l,fontFamily:d,width:h}=e,c=l*r*o.length,u=await m(d),[p]=await s.embedPdf(await wt({lines:o,fontSize:l,lineHeight:r,width:h,height:c,font:u.buffer||d,dy:u.correction(l,r)}));return()=>t.drawPage(p,{width:h,height:c,x:i,y:a-n-c})}if("drawing"===e.type){const{x:i,y:n,path:o,scale:s}=e,{Tly:r,JlX:l,eHj:d,BI_:h,uT$:c,wdZ:u}=ct;return()=>{t.pushOperators(r(),l(c.Round),h(u.Round)),t.drawSvgPath(o,{borderWidth:5,scale:s,x:i,y:a-n}),t.pushOperators(d())}}}}),d=await Promise.all(r);d.forEach(t=>t())});await Promise.all(r);try{const t=await s.save();if(n)return void a(t);ut(t,i,"application/pdf")}catch(l){throw console.log("Failed to save PDF."),l}}var vt=i(1314),Ct=i(1121),Pt=i(464),It=i(6436),Ft={name:"VuePdfEditor",components:{PDFPage:P,ImageItem:E,TextItem:G,Drawing:nt,DrawingCanvas:dt,ImageIcon:vt.A,TextIcon:Ct.A,GestureIcon:Pt.A,PencilIcon:It.A},props:{msg:String,width:{type:String,default:"100%"},height:{type:String,default:"100%"},showChooseFileBtn:{type:Boolean,default:!1},showCustomizeEditor:{type:Boolean,default:!0},showCustomizeEditorAddText:{type:Boolean,default:!0},showCustomizeEditorAddImg:{type:Boolean,default:!0},showCustomizeEditorAddDraw:{type:Boolean,default:!0},showLineSizeSelect:{type:Boolean,default:!0},showFontSizeSelect:{type:Boolean,default:!0},showFontSelect:{type:Boolean,default:!0},showRename:{type:Boolean,default:!0},showSaveBtn:{type:Boolean,default:!0},loadDefaultFile:{type:Boolean,default:!0},saveToUpload:{type:Boolean,default:!1},initFileSrc:{type:String,default:""},initFile:{type:[File,Blob,ArrayBuffer],default:null},initFileName:{type:String,default:""},initTextFields:{type:Array,default:null},textDefaultSize:{type:Number,default:12},initImageUrls:{type:Array,default:null},initImageScale:{type:Number,default:.2},sealImageShow:{type:Boolean,default:!1},sealImageUrl:{type:String,default:"assets/img/sealImag.png"},sealImageHiddenOnSave:{type:Boolean,default:!1},initialScale:{type:Number,default:1},pageCountFormat:{type:String,default:"{currentPage} de {totalPages}"},showPageFooter:{type:Boolean,default:!0}},data(){return{wheelZoomCount:0,narrowEnlargeShow:!1,scale:this.initialScale,pdfDocuments:[],selectedDocIndex:-1,currentFont:"Courier",focusId:null,selectedPageIndex:-1,saving:!1,addingDrawing:!1}},computed:{pdfName:{get(){return this.selectedDocIndex>=0&&this.selectedDocIndex<this.pdfDocuments.length?this.pdfDocuments[this.selectedDocIndex].name:""},set(t){this.selectedDocIndex>=0&&this.selectedDocIndex<this.pdfDocuments.length&&(this.pdfDocuments[this.selectedDocIndex].name=t)}}},watch:{scale(t,e){t!==e&&this.$emit("scale-changed",t)}},async mounted(){await this.init()},created(){},methods:{wheelZoom(t){t.stopPropagation(),t.preventDefault(),this.wheelZoomCount++,this.wheelZoomCount<3||(this.wheelZoomCount=0,t.deltaY>0?this.narrow():t.deltaY<0&&this.enlarge())},enlarge(){this.scale>=2||(this.scale=parseFloat((this.scale+.1).toFixed(1)))},narrow(){this.scale<=.1||(this.scale=parseFloat((this.scale-.1).toFixed(1)))},async init(){const t=this.initFile||this.initFileSrc;if(t)try{await this.addPDF(t),this.selectedDocIndex=0,this.selectedPageIndex=0,m(this.currentFont),this.narrowEnlargeShow=!0,this.initTextField(),this.$nextTick(()=>{this.$emit("pdf-editor:ready")})}catch(e){console.log(e)}else console.log("init file is not exist")},initTextField(){if(this.selectedPageIndex<0||this.selectedDocIndex<0||null===this.initTextFields||0===this.initTextFields.length)return;const t=this.pdfDocuments[this.selectedDocIndex];for(let i=0;i<t.pages.length;i++){this.selectedPageIndex=i;for(let t=0;t<this.initTextFields.length;t++){const e=this.initTextFields[t];this.addTextField(e,0,60*t,this.selectedPageIndex)}}this.selectedPageIndex=0;const e=setInterval(()=>{if(this.$refs.textItem&&this.$refs.textItem.length===this.initTextFields.length*t.pages.length){const t=document.getElementById("pdfBody");t&&t.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window})),clearInterval(e)}},100)},async initImages(){if(this.selectedPageIndex<0||this.selectedDocIndex<0)return;const t=this.pdfDocuments[this.selectedDocIndex];for(let e=0;e<t.pages.length;e++){this.selectedPageIndex=e;let t=0;if(null!==this.initImageUrls&&0!==this.initImageUrls.length)for(let e=0;e<this.initImageUrls.length;e++)t=0===this.initTextFields.length?100*e:100*(e-1+this.initTextFields.length),await this.addImage(this.initImageUrls[e],0,t,1);if(this.sealImageShow){const e=await fetch(this.sealImageUrl);await this.addImage(await e.blob(),0,100*(t+1),.4,!0)}}this.selectedPageIndex=0},onFinishDrawingCanvas(t){const{originWidth:e,originHeight:i,path:n}=t;let a=1;e>500&&(a=500/e),this.addDrawing(e,i,n,a),this.onCancelDrawingCanvas()},onCancelDrawingCanvas(){this.addingDrawing=!1},genID(){let t=0;return function(){return t++}},addObjectToPage(t,e,i=this.selectedDocIndex){if(i<0||i>=this.pdfDocuments.length)return console.error("VuePdfEditor.addObjectToPage: Invalid document index"),!1;if(e<0||e>=this.pdfDocuments[i].pages.length)return console.error("VuePdfEditor.addObjectToPage: Invalid page index"),!1;const n=this.pdfDocuments[i];return n.allObjects=n.allObjects.map((i,n)=>n===e?[...i,t]:i),!0},getAllObjects(t=this.selectedDocIndex){if(t<0||t>=this.pdfDocuments.length)return console.error("VuePdfEditor.getAllObjects: Invalid document index"),[];const e=this.pdfDocuments[t],i=this.scale||1,n=[];return e.allObjects.forEach((t,e)=>{const a=this.$refs["page"+e];if(!a||!a[0])return void console.warn(`VuePdfEditor.getAllObjects: Cannot access page ${e} ref`);const o=a[0].getCanvasMeasurement(),s=o.canvasHeight/i;t.forEach(t=>{n.push({...t,pageIndex:e,pageNumber:e+1,scale:i,normalizedCoordinates:{llx:parseInt(t.x),lly:parseInt(s-t.y),ury:parseInt(s-t.y-t.height),urx:parseInt(t.x+t.width),width:parseInt(t.width),height:parseInt(t.height)}})})}),n},async onUploadPDF(t){const e=t.target.files||t.dataTransfer&&t.dataTransfer.files;if(e&&0!==e.length){this.selectedPageIndex=-1,this.selectedDocIndex=-1;try{for(let t=0;t<e.length;t++){const i=e[t];i&&"application/pdf"===i.type&&await this.addPDF(i)}this.narrowEnlargeShow=!0,this.selectedDocIndex=0,this.selectedPageIndex=0}catch(t){console.log(t)}this.initTextField(),await this.initImages(),t.target.value=null}},resetDefaultState(){this.pdfDocuments=[],this.selectedDocIndex=-1},async addPDF(t){try{0===this.pdfDocuments.length&&this.resetDefaultState();const e=t;let i="";if(i=this.initFileName&&0===this.pdfDocuments.length?this.initFileName:t instanceof File&&t.name?t.name:`document_${(new Date).getTime()}.pdf`,t instanceof File){const e=new Blob([t]);t=await e.arrayBuffer()}const n=await(0,ht.Xb)(t);if(n){const t=n.numPages,a=Array(t).fill().map((t,e)=>n.getPage(e+1)),o=a.map(()=>[]),s=Array(t).fill(1);this.pdfDocuments.push({file:e,name:i,numPages:t,pdfDocument:n,pages:a,pagesScale:s,allObjects:o});const r={allObjects:o,numPages:t,pages:a,measurement:[],pdfName:i};Promise.all(a).then(t=>{t.forEach(t=>{const e=t.getViewport().viewBox;r.measurement[t.pageNumber]={width:e[2],height:e[3]}}),this.$emit("pdf-editor:end-init",r)})}}catch(e){throw console.log("Failed to add pdf."),e}},async onUploadImage(t){const e=t.target.files[0];e&&this.selectedPageIndex>=0&&this.selectedDocIndex>=0&&await this.addImage(e),t.target.value=null},async addImage(t,e=0,i=0,n=1,a=!1){try{let o;o="string"===typeof t&&t.startsWith("http")?t:await(0,ht._v)(t);const s=await(0,ht.Kd)(o),r=this.genID(),{width:l,height:d}=s,h={id:r,type:"image",width:l*n,height:d*n,originWidth:l,originHeight:d,x:e,y:i,isSealImage:a,payload:s,file:t};this.addObject(h)}catch(o){console.log("Fail to add image.",o)}},onAddTextField(){this.selectedPageIndex>=0&&this.selectedDocIndex>=0&&this.addTextField()},addTextField(t="Please enter here",e=0,i=0,n=this.selectedPageIndex){if(this.selectedDocIndex<0)return;const a=this.genID();m(this.currentFont);const o={id:a,text:t,type:"text",size:this.textDefaultSize,lineHeight:1.4,fontFamily:this.currentFont,x:e,y:i,currentPage:n};this.addObject(o)},onAddDrawing(){this.selectedPageIndex>=0&&this.selectedDocIndex>=0&&(this.addingDrawing=!0)},addDrawing(t,e,i,n=1){if(this.selectedDocIndex<0)return;const a=this.genID(),o={id:a,path:i,type:"drawing",x:0,y:0,originWidth:t,originHeight:e,width:t*n,height:e*n,scale:n};this.addObject(o)},addObject(t){if(this.selectedDocIndex<0)return;const e=this.pdfDocuments[this.selectedDocIndex];e.allObjects=e.allObjects.map((e,i)=>i===this.selectedPageIndex?[...e,t]:e)},selectFontFamily(t){const e=t.name;m(e),this.currentFont=e},selectPage(t,e){this.selectedDocIndex=t,this.selectedPageIndex=e},updateObject(t,e,i){if(t<0||t>=this.pdfDocuments.length)return;const n=this.pdfDocuments[t];n.allObjects=n.allObjects.map((t,n)=>n===(void 0!==i.currentPage?i.currentPage:this.selectedPageIndex)?t.map(t=>t.id===e?{...t,...i}:t):t)},deleteObject(t,e){if(t<0||t>=this.pdfDocuments.length)return;const i=this.pdfDocuments[t];i.allObjects=i.allObjects.map((t,i)=>i===this.selectedPageIndex?t.filter(t=>t.id!==e):t)},onMeasure(t,e,i){e<0||e>=this.pdfDocuments.length||(this.pdfDocuments[e].pagesScale[i]=t.scale,this.$forceUpdate())},renamePDF(t){t.focus()},formatPageCount(t,e){return this.pageCountFormat.replace("{currentPage}",t).replace("{totalPages}",e)},async savePDF(){if(0!==this.pdfDocuments.length&&!this.saving){this.saving=!0;try{for(const t of this.pdfDocuments){const e=[];let i=[],n=!1;if(this.sealImageShow)for(let o=0;o<t.pages.length;o++){const a=t.allObjects[o].find(t=>!0===t.isSealImage);if(a){n=!0;const s=await t.pages[o].then(t=>t);e.push({page:s._pageIndex,pageWidth:s._pageInfo.view[2],pageHeight:s._pageInfo.view[3],x:a.x+60,y:a.y+60}),this.sealImageHiddenOnSave&&i.push(t.allObjects[o].filter(t=>t!==a))}else this.sealImageHiddenOnSave&&i.push(t.allObjects[o])}const a=this.sealImageShow&&this.sealImageHiddenOnSave&&n?i:t.allObjects;await yt(t.file,a,t.name,this.saveToUpload,i=>{this.$emit("onSave2Upload",{pdfBytes:i,fileName:t.name,sealInfo:e})})}}catch(t){console.log(t)}finally{this.saving=!1}}}}},Dt=Ft,St=(i(8603),(0,l.A)(Dt,c,u,!1,null,"1fe35f5f",null)),_t=St.exports;i(6512);_t.install=function(t){_t.install.installed||t.component(_t.name,_t)},"undefined"!==typeof window&&window.Vue&&_t.install(window.Vue);var kt=_t;n.Ay.use(kt),n.Ay.config.productionTip=!1,new n.Ay({render:t=>t(h)}).$mount("#app")},3629:function(t,e,i){"use strict";i.r(e);var n=i(9248),a=i.n(n),o=i(9089),s=i.n(o),r=s()(a());r.push([t.id,".operation[data-v-80906ed2]{background-color:rgba(0,0,0,.1)}.selector[data-v-80906ed2]{border-radius:10px;width:12px;height:12px;margin-left:-6px;margin-top:-6px;background-color:#32b5fe;border:1px solid #32b5fe}.delete[data-v-80906ed2]{border-radius:10px;width:18px;height:18px;margin-left:-9px;margin-top:-9px;background-color:#fff}",""]),e["default"]=r},5128:function(t,e,i){"use strict";i.r(e);var n=i(9248),a=i.n(n),o=i(9089),s=i.n(o),r=s()(a());r.push([t.id,'*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.19 | MIT License | https://tailwindcss.com*/*,:after,:before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:after,:before{--tw-content:""}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.pointer-events-none{pointer-events:none}.collapse{visibility:collapse}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-y-0{top:0;bottom:0}.bottom-0{bottom:0}.left-0{left:0}.right-0{right:0}.top-0{top:0}.z-10{z-index:10}.mb-4{margin-bottom:1rem}.mr-2{margin-right:.5rem}.mr-3{margin-right:.75rem}.mr-4{margin-right:1rem}.block{display:block}.flex{display:flex}.hidden{display:none}.h-1{height:.25rem}.h-12{height:3rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-full{height:100%}.w-1{width:.25rem}.w-12{width:3rem}.w-20{width:5rem}.w-24{width:6rem}.w-32{width:8rem}.w-4{width:1rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-7{width:1.75rem}.w-8{width:2rem}.w-full{width:100%}.max-w-xs{max-width:20rem}.flex-shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.origin-top-left{transform-origin:top left}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-ew-resize{cursor:ew-resize}.cursor-grab{cursor:grab}.cursor-grabbing{cursor:grabbing}.cursor-nesw-resize{cursor:nesw-resize}.cursor-not-allowed{cursor:not-allowed}.cursor-ns-resize{cursor:ns-resize}.cursor-nwse-resize{cursor:nwse-resize}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize{resize:both}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.overflow-hidden{overflow:hidden}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-sm{border-radius:.125rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-l{border-left-width:1px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-dotted{border-style:dotted}.border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219/var(--tw-border-opacity,1))}.border-gray-400{--tw-border-opacity:1;border-color:rgb(156 163 175/var(--tw-border-opacity,1))}.border-gray-500{--tw-border-opacity:1;border-color:rgb(107 114 128/var(--tw-border-opacity,1))}.border-gray-600{--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity,1))}.border-gray-800{--tw-border-opacity:1;border-color:rgb(31 41 55/var(--tw-border-opacity,1))}.bg-blue-500{--tw-bg-opacity:1;background-color:rgb(59 130 246/var(--tw-bg-opacity,1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235/var(--tw-bg-opacity,1))}.bg-blue-700{--tw-bg-opacity:1;background-color:rgb(29 78 216/var(--tw-bg-opacity,1))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity,1))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235/var(--tw-bg-opacity,1))}.bg-gray-300{--tw-bg-opacity:1;background-color:rgb(209 213 219/var(--tw-bg-opacity,1))}.bg-gray-400{--tw-bg-opacity:1;background-color:rgb(156 163 175/var(--tw-bg-opacity,1))}.bg-gray-500{--tw-bg-opacity:1;background-color:rgb(107 114 128/var(--tw-bg-opacity,1))}.bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity,1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity,1))}.fill-current{fill:currentColor}.p-5{padding:1.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-12{padding-top:3rem;padding-bottom:3rem}.pb-5{padding-bottom:1.25rem}.pl-2{padding-left:.5rem}.pr-8{padding-right:2rem}.pt-5{padding-top:1.25rem}.text-center{text-align:center}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-bold{font-weight:700}.leading-tight{line-height:1.25}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity,1))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99/var(--tw-text-opacity,1))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81/var(--tw-text-opacity,1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity,1))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.blur{--tw-blur:blur(8px)}.blur,.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216/var(--tw-bg-opacity,1))}.hover\\:bg-gray-500:hover{--tw-bg-opacity:1;background-color:rgb(107 114 128/var(--tw-bg-opacity,1))}.hover\\:bg-red-700:hover{--tw-bg-opacity:1;background-color:rgb(185 28 28/var(--tw-bg-opacity,1))}@media (min-width:768px){.md\\:mr-4{margin-right:1rem}.md\\:flex{display:flex}.md\\:hidden{display:none}.md\\:w-40{width:10rem}.md\\:px-4{padding-left:1rem;padding-right:1rem}}',""]),e["default"]=r},5945:function(t,e,i){"use strict";i.r(e);var n=i(9248),a=i.n(n),o=i(9089),s=i.n(o),r=s()(a());r.push([t.id,".whitespace-no-wrap[data-v-19e49efc]{white-space:nowrap}.outline-none[data-v-19e49efc]{outline:0}",""]),e["default"]=r},5963:function(t,e,i){"use strict";i.r(e);var n=i(9248),a=i.n(n),o=i(9089),s=i.n(o),r=s()(a());r.push([t.id,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#000}",""]),e["default"]=r},6512:function(t,e,i){var n=i(5128);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=i(5312).A;a("9b19c26c",n,!0,{sourceMap:!1,shadowMode:!1})},6586:function(t,e,i){var n=i(249);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=i(5312).A;a("b22d9874",n,!0,{sourceMap:!1,shadowMode:!1})},8603:function(t,e,i){var n=i(1136);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=i(5312).A;a("2a54d47c",n,!0,{sourceMap:!1,shadowMode:!1})},9632:function(t,e,i){var n=i(5963);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=i(5312).A;a("747a99e9",n,!0,{sourceMap:!1,shadowMode:!1})}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={id:n,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,n,a,o){if(!n){var s=1/0;for(h=0;h<t.length;h++){n=t[h][0],a=t[h][1],o=t[h][2];for(var r=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(i.O).every(function(t){return i.O[t](n[l])})?n.splice(l--,1):(r=!1,o<s&&(s=o));if(r){t.splice(h--,1);var d=a();void 0!==d&&(e=d)}}return e}o=o||0;for(var h=t.length;h>0&&t[h-1][2]>o;h--)t[h]=t[h-1];t[h]=[n,a,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.p="/vue-pdf-editor/"}(),function(){var t={57:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,o,s=n[0],r=n[1],l=n[2],d=0;if(s.some(function(e){return 0!==t[e]})){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(l)var h=l(i)}for(e&&e(n);d<s.length;d++)o=s[d],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(h)},n=self["webpackChunk_libresign_vue_pdf_editor"]=self["webpackChunk_libresign_vue_pdf_editor"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504],function(){return i(3357)});n=i.O(n)})();